(this["webpackJsonp@fieldify/antd-example"]=this["webpackJsonp@fieldify/antd-example"]||[]).push([[0],{102:function(e,t,a){function s(e){return e&&"object"===typeof e&&"default"in e?e.default:e}var r=a(155),n=a(0),i=s(n),l=s(a(257)),o=a(190),c=a(460);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}a(189);class d extends n.Component{constructor(e){super(e),this.state=this.cycle(e)}componentDidUpdate(e,t){if(this.props.schema!==e.schema){var a=this.cycle(this.props);this.setState(a)}}cycle(e){this.schema=e.schema;var t={value:e.value,verify:e.verify,feedback:!1,status:null,options:{}};return this.isInjected=e.isInjected,this.onChange=e.onChange?e.onChange:()=>{},this.onError=e.onError?e.onError:()=>{},this.schema?(t.help=this.schema.$help,t.options=this.schema.$options||{},this.handler=this.schema.$_type,t):(this.schema={},t)}timedChange(e,t){if(this._changeTimer)return this._changeTimerQueue++,void(this._changeTimerCb=e);(e=e||this._changeTimerCb)&&(delete this._changeTimerCb,this._changeTimerQueue=0,this._changeTimer=setTimeout(()=>{e(()=>{delete this._changeTimer,this._changeTimerQueue>0&&this.timedChange(e,t)})},t))}changeValue(e,t){t=t||100,this.setState({value:e}),this._lastValue=e,this.timedChange(e=>{this.verify(this._lastValue,t=>{this.setState(t),"success"===t.status?(this.onChange(this.schema,this._lastValue),e()):e()})},t)}verify(e,t){if(!this.handler)return t({status:"error",feedback:!0,help:"No Handler on verifier"});this.handler.verify(e,(e,a)=>!1===e?(this.onError(!1),t({status:"success",feedback:!0,help:null})):(this.onError(!0,a),t({status:"error",feedback:!0,help:a})))}render(e){return!0===this.isInjected?i.createElement(o.Form.Item,{label:this.schema.$doc,required:this.schema.$required,validateStatus:this.state.status,hasFeedback:this.state.feedback,help:this.state.help,style:{marginBottom:"0px"},wrapperCol:{sm:24}},e):i.createElement(o.Form.Item,{label:this.schema.$doc,required:this.schema.$required,validateStatus:this.state.status,hasFeedback:this.state.feedback,help:this.state.help,style:{marginBottom:"8px"},wrapperCol:{sm:24}},e)}}class h extends l{cycle(e){return{schema:e.schema,value:e.value,injected:e.injected}}subRender(e){return!0===this.state.injected?i.createElement(o.Form.Item,{label:this.state.schema.$doc,hasFeedback:!0,validateStatus:"success",style:{marginBottom:"0px"},wrapperCol:{sm:24}},e):i.createElement(o.Form.Item,{label:this.state.schema.$doc,hasFeedback:!0,validateStatus:"success"},e)}render(){return this.subRender(i.createElement("div",{style:{width:"100%"}},this.state.value))}}class m extends n.Component{constructor(e){super(e),this.props=e,e.match&&(this.path=e.match.path),this.state={}}componentDidUpdate(e,t){}}class p extends n.Component{constructor(e){super(e),this.props=e,this.onChange=e.onChange?e.onChange:()=>{},e.match&&(this.path=e.match.path),this.state=u({},e.options),this.default={}}componentDidUpdate(e,t){var a=this.props.options||{},s=e.options||{},r=0;for(var n in this.default){s[n]!==a[n]&&r++}r>0&&(this.setState(a),this.onChange(u({},a)))}setup(e){var t=u({},e);for(var a in t){this.default[a]||delete t[a]}for(var a in this.default)a in t||(t[a]=this.default[a]);return t}configure(){this.state=this.setup(this.state),this.onChange(u({},this.state))}changeIt(e,t){var a=Object.assign({},this.state);a[e]=t,this.setState(a),this.onChange(u({},a))}}var f={code:r.types.String.code,description:r.types.String.description,class:r.types.String.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#fadb14",style:{color:"#555555"}},i.createElement(c.FieldStringOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.default={minSize:1,maxSize:128},this.configure()}render(){return i.createElement("div",null,i.createElement(o.Form.Item,{label:"String min/max size"},i.createElement(o.Space,null,i.createElement(o.InputNumber,{min:0,value:this.state.minSize,onChange:e=>this.changeIt("minSize",e)}),i.createElement(o.InputNumber,{min:0,value:this.state.maxSize,onChange:e=>this.changeIt("maxSize",e)}))))}},Form:class extends d{render(){return super.render(i.createElement(o.Input,{value:this.state.value,placeholder:this.state.options.placeholder,onChange:e=>{var t=e.target;return this.changeValue(t.value)},style:{width:"100%"}}))}},Render:class extends h{}},y=f.Form;var g={code:r.types.Name.code,description:r.types.Name.description,class:r.types.Name.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#36cfc9",style:{color:"#555555"}},i.createElement(c.UserSwitchOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.default={minSize:1,maxSize:128},this.configure()}render(){return i.createElement("div",null,i.createElement(o.Form.Item,{label:"Name min/max size"},i.createElement(o.Space,null,i.createElement(o.InputNumber,{min:0,value:this.state.minSize,onChange:e=>this.changeIt("minSize",e)}),i.createElement(o.InputNumber,{min:0,value:this.state.maxSize,onChange:e=>this.changeIt("maxSize",e)}))))}},Form:class extends d{constructor(e){super(e)}cycle(e){var t=super.cycle(e);return t.value||(t.value={}),this.result=u({},t.value),t}error(e,t,a){}setField(e,t,a){this.result[e]=a,this.onChange(this.schema,this.result)}render(){return super.render(i.createElement(o.Row,{gutter:16},i.createElement(o.Col,{className:"gutter-row",span:12},i.createElement(y,{schema:this.schema.first,verify:this.state.verify,value:this.state.value.first,onChange:(e,t)=>this.setField("first",e,t),isInjected:!0})),i.createElement(o.Col,{className:"gutter-row",span:12},i.createElement(y,{schema:this.schema.last,verify:this.state.verify,value:this.state.value.last,onChange:(e,t)=>this.setField("last",e,t),isInjected:!0}))))}},Render:class extends h{static getDerivedStateFromProps(e,t){if(t.value&&"object"===typeof t.value){var a="";t.value.first&&(a+=t.value.first),t.value.last&&(a+=" "+t.value.last),t.value=a.trim()}return t}},noFormItem:!0};var v={code:r.types.Email.code,description:r.types.Email.description,class:r.types.Email.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#1890ff"},i.createElement(c.MailOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.default={subAddressing:!0},this.configure()}render(){return i.createElement("div",null,i.createElement(o.Form.Item,{label:"Sub-addressing"},i.createElement(o.Checkbox,{checked:this.state.subAddressing,onChange:e=>{var t=e.target;return this.changeIt("subAddressing",t.checked)}},"Allowed")))}},Form:class extends d{render(){return super.render(i.createElement(o.Input,{value:this.state.value,placeholder:this.state.options.placeholder,onChange:e=>{var t=e.target;return this.changeValue(t.value)}}))}},Render:class extends h{}};var $={code:r.types.Number.code,description:r.types.Number.description,class:r.types.Number.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#ff7a45"},i.createElement(c.NumberOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.default={minSize:1,maxSize:128},this.configure()}render(){return i.createElement("div",null)}},Form:class extends d{render(){return super.render(i.createElement(o.InputNumber,{value:this.state.value,placeholder:this.state.options.placeholder,onChange:e=>this.changeValue(e),style:{width:"100%"}}))}},Render:class extends h{}};var E={code:r.types.Checkbox.code,description:r.types.Checkbox.description,class:r.types.Checkbox.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#85144b",style:{color:"white"}},i.createElement(c.CheckSquareOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.configure()}},Form:class extends d{render(){return super.render(i.createElement(o.Checkbox,{checked:this.state.value,onChange:e=>{var t=e.target;return this.changeValue(t.checked)},style:{width:"100%"}},this.state.options.placeholder))}},Render:class extends h{}};var b={code:r.types.DateTimePicker.code,description:r.types.DateTimePicker.description,class:r.types.DateTimePicker.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#fa541c"},i.createElement(c.FieldTimeOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.configure()}},Form:class extends d{render(){return super.render(i.createElement(o.DatePicker,{showTime:!0,defaultValue:this.state.value,onChange:e=>{e?this.changeValue(e.format()):this.changeValue(null)}}))}},Render:class extends h{}};var x={code:r.types.DatePicker.code,description:r.types.DatePicker.description,class:r.types.DatePicker.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#ad2102"},i.createElement(c.FieldTimeOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.configure()}},Form:class extends d{render(){return super.render(i.createElement(o.DatePicker,{defaultValue:this.state.value,onChange:(e,t)=>this.changeValue(t)}))}},Render:class extends h{}},k=o.DatePicker.RangePicker;var S={code:r.types.DatePickerRange.code,description:r.types.DatePickerRange.description,class:r.types.DatePickerRange.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#ad2102"},i.createElement(c.FieldTimeOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.configure()}},Form:class extends d{render(){return super.render(i.createElement(k,{onChange:(e,t)=>{if(e){var a={from:t[0],to:t[1]};this.changeValue(a)}else{this.changeValue({from:null,to:null})}}}))}},Render:class extends h{render(){return this.subRender(i.createElement("div",{style:{width:"100%"}},"object"===typeof this.state.value&&this.state.value.from&&this.state.value.to?this.state.value.from+" - "+this.state.value.to:"-"))}}};var C={code:r.types.TimePicker.code,description:r.types.TimePicker.description,class:r.types.TimePicker.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#ad2102"},i.createElement(c.FieldTimeOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.configure()}},Form:class extends d{render(){return super.render(i.createElement(o.TimePicker,{defaultValue:this.state.value,onChange:(e,t)=>this.changeValue(t)}))}},Render:class extends h{}},A=o.TimePicker.RangePicker;var O={code:r.types.TimePickerRange.code,description:r.types.TimePickerRange.description,class:r.types.TimePickerRange.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#ad2102"},i.createElement(c.FieldTimeOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.configure()}},Form:class extends d{render(){return super.render(i.createElement(A,{onChange:(e,t)=>{if(e){var a={from:t[0],to:t[1]};this.changeValue(a)}else{this.changeValue({from:null,to:null})}}}))}},Render:class extends h{render(){return this.subRender(i.createElement("div",{style:{width:"100%"}},"object"===typeof this.state.value?this.state.value.from+" - "+this.state.value.to:"-"))}}};var F={code:r.types.Select.code,description:r.types.Select.description,class:r.types.Select.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#52c41a",style:{color:"white"}},i.createElement(c.SelectOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.default={minSize:1,maxSize:128},this.configure()}render(){return i.createElement("div",null,i.createElement(o.Form.Item,{label:"Select min/max size"},i.createElement(o.Space,null,i.createElement(o.InputNumber,{min:0,value:this.state.minSize,onChange:e=>this.changeIt("minSize",e)}),i.createElement(o.InputNumber,{min:0,value:this.state.maxSize,onChange:e=>this.changeIt("maxSize",e)}))))}},Form:class extends d{constructor(e){super(e),this.state={value:e.value,options:{}},e.schema.$options&&(this.state.options=e.schema.$options),!this.state.value&&this.state.options.default&&(this.state.value=this.state.options.default,this.onChange(this.schema,this.state.value)),this.state.items=this.updateItems()}updateItems(){if(!this.state.options.items)return[];var e=[];for(var t in this.state.options.items){var a=this.state.options.items[t];e.push(i.createElement(o.Select.Option,{value:t,key:t},a))}return e}render(){return super.render(i.createElement(o.Select,{value:this.state.value,onChange:e=>this.changeValue(e)},this.state.items))}},Render:class extends h{static getDerivedStateFromProps(e,t){if("string"===typeof t.value&&e.schema.$options&&e.schema.$options.items){var a=e.schema.$options.items;a[t.value]&&(t.value=a[t.value])}return t}}},w={display:"block",height:"30px",lineHeight:"30px"};var I={code:r.types.Radio.code,description:r.types.Radio.description,class:r.types.Radio.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#096dd9",style:{color:"white"}},i.createElement(c.FieldBinaryOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.default={minSize:1,maxSize:128},this.configure()}render(){return i.createElement("div",null,i.createElement(o.Form.Item,{label:"Radio min/max size"},i.createElement(o.Space,null,i.createElement(o.InputNumber,{min:0,value:this.state.minSize,onChange:e=>this.changeIt("minSize",e)}),i.createElement(o.InputNumber,{min:0,value:this.state.maxSize,onChange:e=>this.changeIt("maxSize",e)}))))}},Form:class extends d{constructor(e){super(e),this.state={value:e.value,options:{}},e.schema.$options&&(this.state.options=e.schema.$options),!this.state.value&&this.state.options.default&&(this.state.value=this.state.options.default,this.onChange(this.schema,this.state.value)),this.state.items=this.updateItems()}componentDidUpdate(e,t){e.schema!==this.props.schema&&(this.setState({options:e.schema.$options,items:this.updateItems()}),this.onChange(this.schema,this.state.value))}updateItems(){var e=w;if(!0===this.props.schema.$options.horizontal&&(e=null),!this.props.schema.$options.items)return[];var t=[];for(var a in this.props.schema.$options.items){var s=this.props.schema.$options.items[a];t.push(i.createElement(o.Radio,{style:e,value:a,key:a},s))}return t}render(){return super.render(i.createElement(o.Radio.Group,{value:this.state.value,onChange:e=>{var t=e.target;return this.changeValue(t.value)}},this.state.items))}},Render:class extends h{static getDerivedStateFromProps(e,t){if("string"===typeof t.value&&e.schema.$options&&e.schema.$options.items){var a=e.schema.$options.items;a[t.value]&&(t.value=a[t.value])}return t}}};class N extends r.fieldifyType{}var P={code:"Object",description:"Nested Sub Object",class:N};class T extends r.fieldifyType{configuration(){return{min:{$doc:"Minimum of items",$required:!1,$type:"Number"},max:{$doc:"Maximun of items",$required:!1,$type:"Number"}}}}var _={code:"Array",description:"Array",class:T};var z={code:r.types.FieldName.code,description:r.types.FieldName.description,class:r.types.FieldName.class,Info:class extends f.Info{},Builder:class extends p{constructor(e){super(e),this.default={minSize:1,maxSize:128}}render(){return i.createElement("div",null,i.createElement(o.Form.Item,{label:"FieldName min/max size"}))}},Form:class extends f.Form{constructor(e){super(e)}verify(e,t){super.verify(e,a=>{if("success"!==a.status)return t(a);if(this.props.user&&e in this.props.user){var s="Field name already used";return this.onError(!0,s),t({status:"error",feedback:!0,help:s})}t(a)})}}};var j={code:r.types.KV.code,description:r.types.KV.description,class:r.types.KV.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#22075e"},i.createElement(c.SmallDashOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.default={minSize:1,maxSize:128},this.configure()}render(){return i.createElement("div",null)}},Form:class extends d{constructor(e){super(e)}cycle(e){var t=super.cycle(e);return t.value||(t.value={}),this.result=u({},t.value),t.modal=!1,t.modalCurrent={key:"",value:""},t.dataTree=u({},t.value),t.dataSource=this.computeDataSource(t.dataTree),t}computeDataSource(e){var t=this,a=[],s=function(s){var r=e[s];a.push({key:s,value:r,actions:i.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},i.createElement("span",{className:"ant-radio-button-wrapper",onClick:()=>t.removeKey(s)},i.createElement("span",null,i.createElement(c.DeleteOutlined,null))),i.createElement("span",{className:"ant-radio-button-wrapper",onClick:()=>t.openModal({key:s,value:r})},i.createElement("span",null,i.createElement(c.EditOutlined,null))))})};for(var r in e)s(r);return a}handleModalChange(e,t){var a=u({},this.state.modalCurrent);a[e]=t,this.setState({modalCurrent:a})}openModal(e){var t={modalError:!1,modalInitial:null,modalCurrent:e||{key:"",value:""},modal:!0};e&&(t.modalInitial=u({},t.modalCurrent)),this.setState(t)}removeKey(e){var t=u({},this.state);delete t.dataTree[e],t.dataSource=this.computeDataSource(t.dataTree),this.setState(t),this.changeValue(t.dataTree)}editedButton(){var e=u({},this.state),t=this.state.modalCurrent,a=this.schema.$_type,s={};s[t.key]=t.value,a.verify(s,(t,a)=>{e.modalError=t,e.modalErrorMessage=a,!1===t&&(e.modalInitial&&delete e.dataTree[e.modalInitial.key],e.dataTree[e.modalCurrent.key]=e.modalCurrent.value,e.dataSource=this.computeDataSource(e.dataTree),e.modal=!1),this.setState(e),this.changeValue(e.dataTree)})}render(){var e=[{title:"Key",dataIndex:"key",key:"key"},{title:"Value",dataIndex:"value",key:"value"},{title:i.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},i.createElement("span",{className:"ant-radio-button-wrapper",onClick:()=>this.openModal()},i.createElement("span",null,"Add ",i.createElement(c.PlusOutlined,null)))),dataIndex:"actions",key:"actions",align:"right"}],t={labelCol:{span:8},wrapperCol:{span:16}};return super.render(i.createElement("div",null,i.createElement(o.Modal,{centered:!0,closable:!1,visible:this.state.modal,width:300,onOk:this.editedButton.bind(this),onCancel:()=>{this.setState({modal:!1})}},!0===this.state.modalError?i.createElement("div",{style:{marginBottom:8}},i.createElement(o.Alert,{size:"small",message:this.state.modalErrorMessage,type:"error"})):null,i.createElement(o.Form,t,i.createElement(o.Form.Item,{label:"Key"},i.createElement(o.Input,{value:this.state.modalCurrent.key,onChange:e=>{var t=e.target;return this.handleModalChange("key",t.value)}})),i.createElement(o.Form.Item,{label:"Value"},i.createElement(o.Input,{value:this.state.modalCurrent.value,onChange:e=>{var t=e.target;return this.handleModalChange("value",t.value)}})))),i.createElement(o.Table,{size:"small",dataSource:this.state.dataSource,columns:e,pagination:{total:this.state.dataSource.length,pageSize:this.state.dataSource.length,hideOnSinglePage:!0}})))}},Render:class extends h{cycle(e){var t=super.cycle(e);return t.value||(t.value={}),this.result=u({},t.value),t.dataTree=u({},t.value),t.dataSource=this.computeDataSource(t.dataTree),t}computeDataSource(e){var t=[];for(var a in e){var s=e[a];t.push({key:a,value:s})}return t}render(){return super.subRender(i.createElement("div",null,i.createElement(o.Table,{showHeader:!1,size:"small",dataSource:this.state.dataSource,columns:[{dataIndex:"key",key:"key"},{dataIndex:"value",key:"value"}],pagination:{total:this.state.dataSource.length,pageSize:this.state.dataSource.length,hideOnSinglePage:!0}})))}}};var R={code:r.types.Hash.code,description:r.types.Hash.description,class:r.types.Hash.class,Info:class extends m{render(){return i.createElement("span",null,i.createElement(o.Tag,{color:"#badb64",style:{color:"#555555"}},i.createElement(c.LinkOutlined,null)))}},Builder:class extends p{constructor(e){super(e),this.configure()}},Form:class extends d{render(){return super.render(i.createElement(o.Input,{value:this.state.value,placeholder:this.state.options.placeholder,onChange:e=>{var t=e.target;return this.changeValue(t.value)},style:{width:"100%"}}))}},Render:class extends h{}},V={Name:g,Email:v,String:f,Number:$,Select:F,Radio:I,Checkbox:E,DateTimePicker:b,DatePicker:x,DatePickerRange:S,TimePicker:C,TimePickerRange:O,Hash:R,Object:P,Array:_,FieldName:z,KV:j};class D extends r.schema{constructor(e,t){super(e,t)}resolver(e){return V[e]}compile(e){super.compile(e)}}class q extends l{constructor(e){super(e),this.formRef=i.createRef()}cycle(e,t){var a={layout:e.layout?e.layout:"horizontal"};return a.rawSchema=e.schema,a.schema=new D("form"),a.schema.compile(a.rawSchema),a.rawInput=e.input,a.input=new r.input(a.schema),a.input.setValue(e.input),a.inputValue=a.input.getValue(),a.verify=e.verify||!1,a.actions=e.actions,a.generator=e.generator,this.references={},this.onChange=e.onChange?e.onChange:()=>{},a.reactive=this.update({state:a,root:a.schema,input:a.inputValue,verify:a.verify}),a}getValue(){return this.state.input.getValue()}clickAddArray(e){this.state.input.set(e);var t=this.state.input.getValue();this.onChange(this.state.input,t),this.setState({inputValue:t,reactive:this.update({state:this.state,root:this.state.schema,input:t,verify:!1})})}clickRemoveArrayItem(e){this.state.input.remove(e);var t=this.state.input.getValue();this.onChange(this.state.input,t),this.setState({inputValue:t,reactive:this.update({state:this.state,root:this.state.schema,input:t,verify:!1})})}setValue(e,t){if(this.state.input){this.state.input.set(e,t);var a=this.state.input.getValue();this.onChange(this.state.input,a),this.setState({inputValue:a})}}update(e){var t=this,a=e.root,s=e.input,n=e.verify,l=e.state,d=(e,a,s,h,m)=>(m=m||"",s||(s={}),r.utils.orderedRead(e,(e,r)=>{var p=u({},Array.isArray(r)?r[0]:r),f=a[p.$_key],y=u({},Array.isArray(f)?f[0]:f),g=s?s[p.$_key]:null,v=m+"."+p.$_key;if(!0===p.$_array){var $=[{dataIndex:"form",key:"form",width:"100%"}];!0===l.actions&&$.push({dataIndex:"actions",key:"actions",align:"right"});var E=[],b=g,x=p.$array||{},k=x.min?x.min:!0===p.$required?1:0;if(!0===p.$_nested){b=s[p.$_key];if(Array.isArray(g)||(b=s[p.$_key]=[]),k-b.length>0)for(var S=0;S<=k-b.length;S++)b.push({});var C=function(){var e=b[S],a=v+"."+S,s=[];d(p,y,e,s,a);var r={key:a,form:s};!0===l.actions&&(r.actions=i.createElement(o.Button,{size:"small",onClick:()=>t.clickRemoveArrayItem(a)},i.createElement("span",null,i.createElement(c.DeleteOutlined,null)))),E.push(r)};for(S=0;S<b.length;S++)C()}else if(p.$type){delete y.$doc;var A=p.$type[l.generator];if(Array.isArray(g)||(s[p.$_key]=[],b=s[p.$_key]),!b)return h;if(k-b.length>0)for(S=0;S<=k-b.length;S++)b.push(null);var O=function(){var e=b[S],a=v+"."+S,s={key:a,form:i.createElement(A,{schema:y,value:e,verify:n,user:t.props.user,onChange:(e,s)=>t.setValue(a,s),isInjected:!0,onError:(e,s)=>{!0===e?t.references[a]=s:t.references[a]&&delete t.references[a]}})};!0===l.actions&&(s.actions=i.createElement(o.Button,{size:"small",onClick:()=>t.clickRemoveArrayItem(a)},i.createElement("span",null,i.createElement(c.DeleteOutlined,null)))),E.push(s)};for(S=0;S<b.length;S++)O()}h.push(i.createElement(o.Form.Item,{key:p.$_wire,noStyle:!0},i.createElement("div",{className:"ant-form-item"},i.createElement(o.Card,{size:"small",title:p.$_access.$doc,extra:i.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},b&&!0===l.actions?i.createElement("span",{className:"ant-radio-button-wrapper",onClick:()=>this.clickAddArray(v+"."+b.length)},i.createElement("span",null,i.createElement(c.PlusOutlined,null))):null)},i.createElement(o.Table,{size:"small",dataSource:E,columns:$,verticalAlign:"middle",showHeader:!1,pagination:{total:E.length,pageSize:E.length,hideOnSinglePage:!0},bordered:!0})))))}else if(!0===p.$_nested){var F=[];d(p,y,g,F,v),h.push(i.createElement("div",{key:p.$_wire,className:"ant-form-item"},i.createElement(o.Card,{size:"small",title:p.$doc},F)))}else if(r.$type){var w=r.$type[l.generator];h.push(i.createElement(w,{schema:y,value:g,key:p.$_wire,verify:n,user:this.props.user,onChange:(e,t)=>this.setValue(v,t),onError:(e,t)=>{!0===e?this.references[p.$_wire]=t:this.references[p.$_wire]&&delete this.references[p.$_wire]}}))}}),h),h=[];return d(a.handler.schema,a.handlerSchematized.schema,s,h),h}render(){var e={};return"horizontal"===this.state.layout&&(e={labelCol:{span:8},wrapperCol:{span:16}}),i.createElement(o.Form,u({layout:this.state.layout,key:this.formRef},e,{name:"basic"}),this.state.reactive)}}class B extends l{cycle(e){return{layout:e.layout,schema:e.schema,input:e.input,onChange:e.onChange}}render(){return i.createElement(q,{schema:this.state.schema,input:this.state.input,onChange:this.state.onChange,actions:!0,layout:this.state.layout,generator:"Form"})}}var L={},K={};for(var H in V)L[H]=V[H].description,"Array"!==H&&(K[H]=V[H].description);var U={key:{$doc:"Name of the field",$type:V.FieldName,$required:!0,$position:10},type:{$doc:"Field type",$type:"Select",$required:!0,$options:{items:L},$position:11},doc:{$doc:"Description",$required:!1,$type:"String",$position:22},position:{$doc:"Position in the serie",$required:!1,$type:"Number",$default:0,$options:{acceptedTypes:"integer"},$position:23}};class M extends i.Component{constructor(e){super(e),this.formRef=i.createRef(),this.state=this.cycle(e,!0),this.currentSchema=U}componentDidUpdate(e){var t=!1,a=u({},this.state);this.props.visible!==e.visible&&(this.currentSchema=U,a=this.cycle(this.props),t=!0),!0===t&&this.setState(a)}cycle(e,t){var a={edition:!1,original:e.value,form:{state:"Filling",color:"blue"},value:{},visible:e.visible,user:e.user,verify:!1};if(a.user&&a.user.$_wire?a.initialPath=a.user.$_wire:a.initialPath="",e.value){var s=e.value;a.edition=!0,!0!==s.$_array&&!0!==s.$_nested?a.value={key:s.$_key,type:s.$type.code,doc:s.$doc,required:s.$required,read:s.$read,write:s.$write,options:s.$options,position:s.$position}:!0===s.$_array&&!0===s.$_nested?a.value={key:s.$_key,type:"Array",content:"Object",doc:s.$doc,required:s.$required,read:s.$read,write:s.$write,options:s.$options,position:s.$position}:!0===s.$_array&&!0!==s.$_nested?a.value={key:s.$_key,type:"Array",content:"string"===typeof s.$type?s.$type:s.$type.code,doc:s.$doc,required:s.$required,read:s.$read,write:s.$write,options:s.$options,position:s.$position}:!0!==s.$_array&&!0===s.$_nested&&(a.value={key:s.$_key,type:"Object",doc:s.$doc,required:s.$required,read:s.$read,write:s.$write,options:s.$options,position:s.$position})}else a.value={};return this.driveSchema(a),a.input.setValue(a.value),a}driveSchema(e,t){var a=e.value,s=V[a.type];if(s&&s!==this.currentType){var n=(new s.class).configuration();this.currentSchema=u({},U),"Array"===a.type&&(this.currentSchema.content={$doc:"Item content type",$type:"Select",$required:!0,$options:{default:a.content||"Object",items:K},$position:12}),n&&(this.currentSchema.options=u({},n,{$doc:"Type configuration"})),e.currentType=s,e.schema=new D("modal"),e.schema.compile(this.currentSchema),e.input=new r.input(e.schema)}else e.schema=new D("modal"),e.schema.compile(this.currentSchema),e.input=new r.input(e.schema)}formChanged(e){var t={schema:this.state.schema,input:this.state.input,value:u({},this.state.value,e)};this.driveSchema(t),t.input.setValue(t.value),this.setState(t),t.input.verify(e=>{var t={form:{},verify:!0};t.error=e.error,!0===e.error?(t.form.color="blue",t.form.state="Filling"):(t.form.color="green",t.form.state="Passed"),this.setState(t)})}handleOK(){this.state.input.verify(e=>{var t={form:{},verify:!0};if(t.error=e.error,!0===e.error)t.form.color="red",t.form.state="Error";else{t.form.color="green",t.form.state="Passed",this.setState(t);var a=e.result,s={};for(var n in a)s["$"+n]=a[n];var i=this.state.initialPath.split(".");i.pop(),i.push(a.key);var l=i.join(".");if(delete s.$key,"Array"===s.$type&&"Object"===s.$content){if(!0===this.state.edition){if(this.props.user.$_wire){var o=r.utils.getNO(this.props.user);for(var c in o.nestedObject){var u=o.nestedObject[c];s[u[0]]=u[1]}}}else s.$doc||(s.$doc="");delete s.$type,delete s.$content,s=[s]}else if("Array"===s.$type&&"Object"!==s.$content)s.$type=s.$content,delete s.$content,s=[s];else if("Object"===s.$type){if(!0===this.state.edition){if(this.props.user.$_wire){var d=r.utils.getNO(this.props.user);for(var c in d.nestedObject){var h=d.nestedObject[c];s[h[0]]=h[1]}}}else s.$doc||(s.$doc="");delete s.$type}!0===this.state.edition?this.props.onOk({edition:!0,oldPath:this.state.initialPath,newPath:l,key:a.key,value:s}):this.props.onOk({edition:!1,newPath:this.state.initialPath+"."+a.key,key:a.key,value:s})}})}render(){return i.createElement(o.Modal,{title:i.createElement("span",null,"Add New Field To Your Schema ",i.createElement(o.Tag,{color:this.state.form.color},this.state.form.state)),centered:!0,visible:this.state.visible,width:600,onOk:this.handleOK.bind(this),onCancel:()=>{this.props.onCancel(this.state)}},i.createElement(B,{ref:this.formRef,schema:this.currentSchema,input:this.state.value,user:this.props.user,verify:this.state.verify,onChange:this.formChanged.bind(this)}))}}var J={__proto__:null,FieldifySchemaBuilder:class extends l{cycle(e,t){var a={modal:!1,modalUser:null,schemaDataSource:[]};return this.onChange=()=>{},e.onChange&&(this.onChange=e.onChange),a.schema=new D("form"),a.schema.compile(e.schema),a.schemaDataSource=this.updateDataSource(a.schema),this.columns=[{title:"Key",dataIndex:"name",key:"key"},{title:"Description",dataIndex:"doc",key:"doc"},{title:i.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},i.createElement("span",{className:"ant-radio-button-wrapper",onClick:()=>this.handlingAdd()},i.createElement("span",null,"Add ",i.createElement(c.PlusOutlined,null)))),dataIndex:"actions",key:"actions",align:"right"}],a}fireOnChange(){var e=this.state.schema.export();this.onChange(e)}itemChanged(e){if(!0===e.edition){this.state.schema.getLineup(e.oldPath);this.state.schema.removeLineup(e.oldPath),this.state.schema.setLineup(e.newPath,e.value),o.notification.success({message:"Field updated",description:"Field at "+e.oldPath+" has been successfully updated"})}else this.state.schema.setLineup(e.newPath,e.value),o.notification.success({message:"Field added",description:"Field at "+e.newPath+" has been successfully added"});this.fireOnChange(),this.setState({modal:!1,modalContent:null,modalUser:null,schemaDataSource:this.updateDataSource(this.state.schema)})}itemRemove(e){this.state.schema.removeLineup(e.$_wire),this.fireOnChange(),this.setState({schemaDataSource:this.updateDataSource(this.state.schema)}),o.notification.success({message:"Field removed",description:"Field at "+e.$_wire+" has been successfully removed"})}handlingAdd(e){e=e||".";var t={modal:!0,modalContent:null,modalUser:this.state.schema.getLineup(e)||this.state.schema.handler.schema};this.setState(t)}handlingEdit(e){var t=e.$_wire||".",a={modal:!0,modalContent:e,modalUser:this.state.schema.getLineup(t)||this.state.schema.handler.schema};this.setState(a)}updateDataSource(e){var t=this;return e?function e(a,s){s||(s="");var n=[];return r.utils.orderedRead(a,(a,r)=>{var l=s+"."+r.$_key;if(r.$_path=l,Array.isArray(r)){l=s+"."+r[0].$_key,r[0].$_path=l,r[0].$_array=!0;var u=i.createElement(o.Tooltip,{title:"... of objects"},i.createElement(o.Tag,{color:"#722ed1"},i.createElement(c.UnorderedListOutlined,null)));if("$type"in r[0]){var d=r[0].$type.Info;u=i.createElement(d,null)}else r[0].$_nested=!0;n.push({ptr:r[0],key:l,name:i.createElement("div",null,i.createElement(o.Tooltip,{title:"This field is an array ..."},i.createElement(o.Tag,{color:"#eb2f96"},i.createElement(c.CopyOutlined,null))),u,i.createElement("strong",null,r[0].$_key)),doc:r[0].$doc,children:"$type"in r[0]?null:e(r[0],l),actions:i.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},i.createElement(o.Popconfirm,{title:i.createElement("span",null,"Are you sure to delete the Array ",i.createElement("strong",null,l)),onConfirm:()=>t.itemRemove(r[0]),okText:"Yes",cancelText:"No"},i.createElement("span",{className:"ant-radio-button-wrapper"},i.createElement("span",null,i.createElement(c.DeleteOutlined,null)))),i.createElement("span",{className:"ant-radio-button-wrapper",onClick:()=>t.handlingEdit(r[0])},i.createElement("span",null,i.createElement(c.EditOutlined,null))),"$type"in r[0]?null:i.createElement("span",{className:"ant-radio-button-wrapper",onClick:()=>t.handlingAdd(l)},i.createElement("span",null,i.createElement(c.PlusOutlined,null))))})}else if("object"!==typeof r||r.$type){var h=r.$type.Info;n.push({ptr:r,key:l,name:i.createElement("div",null,i.createElement(h,null)," ",r.$_key),doc:r.$doc,actions:i.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},i.createElement(o.Popconfirm,{title:i.createElement("span",null,"Are you sure to delete ",i.createElement("strong",null,l)),onConfirm:()=>t.itemRemove(r),okText:"Yes",cancelText:"No"},i.createElement("span",{className:"ant-radio-button-wrapper"},i.createElement("span",null,i.createElement(c.DeleteOutlined,null)))),i.createElement("span",{className:"ant-radio-button-wrapper",onClick:()=>t.handlingEdit(r)},i.createElement("span",null,i.createElement(c.EditOutlined,null))))})}else r.$_nested=!0,n.push({ptr:r,key:l,name:i.createElement("div",null,i.createElement(o.Tooltip,{title:"This field is an object"},i.createElement(o.Tag,{color:"#722ed1"},i.createElement(c.UnorderedListOutlined,null))),i.createElement("strong",null,r.$_key)),doc:r.$doc,children:e(r,l),actions:i.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},i.createElement(o.Popconfirm,{title:i.createElement("span",null,"Are you sure to delete Object ",i.createElement("strong",null,l)),onConfirm:()=>t.itemRemove(r),okText:"Yes",cancelText:"No"},i.createElement("span",{className:"ant-radio-button-wrapper"},i.createElement("span",null,i.createElement(c.DeleteOutlined,null)))),i.createElement("span",{className:"ant-radio-button-wrapper",onClick:()=>t.handlingEdit(r)},i.createElement("span",null,i.createElement(c.EditOutlined,null))),i.createElement("span",{className:"ant-radio-button-wrapper",onClick:()=>t.handlingAdd(l)},i.createElement("span",null,i.createElement(c.PlusOutlined,null))))})}),n}(e.handler.schema):[]}render(){var e=this.state.schemaDataSource;return i.createElement("div",null,i.createElement(M,{user:this.state.modalUser,visible:this.state.modal,value:this.state.modalContent,onCancel:()=>this.setState({modal:!1}),onOk:this.itemChanged.bind(this)}),i.createElement(o.Table,{columns:this.columns,dataSource:e,size:"small",pagination:{total:e.length,pageSize:e.length,hideOnSinglePage:!0},expandable:{defaultExpandAllRows:!0}}))}},FieldifySchemaForm:B,FieldifySchemaRender:class extends l{cycle(e){return{layout:e.layout,schema:e.schema,input:e.input}}render(){return i.createElement(q,{schema:this.state.schema,input:this.state.input,actions:!1,layout:this.state.layout,generator:"Render"})}},FieldifySchema:D},W="1.0.8";class X extends r.input{}var Y=J,G=V,Q=W;t.Input=X,t.Schema=Y,t.Types=G,t.Version=Q},104:function(e,t,a){(function(t){var s=a(233);const r=/^\$/,n={$required:!0,$maxArray:100};e.exports={leaf:r,leafPrivate:/^\$_/,isThereSubObject:e=>{for(var t in e)if(!n.hasOwnProperty(t)&&!r.test(t))return!0;return!1},isThereObjectParams:e=>{for(var t in e)if(!n.hasOwnProperty(t)&&r.test(t))return!0;return!1},eachObject:(e,a)=>{var s=[];for(var r in e)s.push([r,e[r]]);t.nextTick((function e(){var r=s.shift();void 0!==r?a(r[0],r[1],()=>{t.nextTick(e)},!1):a(null,null,e,!0)}))},eachItem:(e,a)=>{var s=0;if(!Array.isArray(e))return a(null,null,null,!0);t.nextTick((function r(){var n=e[s];void 0!==n?a(s,n,()=>{s++,t.nextTick(r)},!1):a(null,null,null,!0)}))},sync:(e,a)=>{t.nextTick((function s(r){var n=e[r];n?n(()=>{r++,t.nextTick(s,r)}):a&&a()}),0)},getNO:e=>{const t=[],a=[];for(var s in e){const r=e[s];"$"===s.substr(0,1)?a.push([s,r]):t.push([s,r])}return{nestedObject:t,nestedOptions:a}},orderedRead:(e,t,a)=>{a=a||"";const n=s({},e);for(var i in n)r.test(i)&&delete n[i];const l=Object.values(n).sort((e,t)=>(Array.isArray(e)&&(e=e[0]),Array.isArray(t)&&(t=t[0]),e.$position-t.$position));for(var o=0;o<l.length;o++){var c=l[o];Array.isArray(c)&&(c=c[0]),c.$position=o}for(o=0;o<l.length;o++){t(o,l[o])}}}}).call(this,a(145))},146:function(e,t){function a(e,t){for(var s in t){const r=t[s];Array.isArray(r)?(Array.isArray(e[s])||(e[s]=[{}]),a(e[s][0],r[0])):r&&"object"===typeof r&&"Object"===r.constructor.name?(e[s]||(e[s]={}),a(e[s],r)):e[s]=t[s]}}e.exports=function(e,t){const s={};return a(s,e),a(s,t),s}},155:function(e,t,a){const s=a(104),r=a(146),n=a(163),i=a(164),l=a(165),o=a(235),c=a(255),u=a(166),d=a(44),h=a(256);e.exports={schema:o,input:c,types:u,fusion:r,assign:n,iterator:i,compile:l,utils:s,version:h.version,fieldifyType:d}},161:function(e,t,a){},163:function(e,t,a){const s=a(104);e.exports=function e(t,a,r,n,i){const l=s.getNO(t).nestedObject;var o={};if(!1===i){if(!1===a(r,o,t,n))return o}for(var c in l){const s=l[c][0],i=t[s],u=n;n=n?n+"."+s:s,Array.isArray(i)?(o[s]=[e(i[0],a,r,n,!1)],0===Object.keys(o[s][0]).length&&delete o[s]):(o[s]=e(i,a,r,n,!1),0===Object.keys(o[s]).length&&delete o[s]),n=u}if(!1!==i)for(var u in o){const e=o[u];"object"===typeof e&&0===Object.keys(e)&&delete o[u]}return o}},164:function(e,t,a){const s=a(104);class r{constructor(e){this.options=e,this.handler=e.handler,this.result={},this.level=0,e.onAssign=e.onAssign||((e,t)=>{e.result[e.key]=e.input,t()}),e.onEnter=e.onEnter||(e=>{}),e.onLeave=e.onLeave||(e=>{}),e.onEnd=e.onEnd||(e=>{})}branch(e,t,a,r){r=r||".";const n=s.getNO(e),i={};this.level++,this.options.onEnter(e),s.eachItem(n.nestedObject,(n,l,o,c)=>{if(!0===c)return this.level--,this.options.onLeave(e),void(0===this.level?(this.result=i,a(this,i)):a(this,i));const u=l[0],d={iterator:this,key:u,object:l[1],input:t?t[l[0]]:null,line:r+u,result:i};if(Array.isArray(d.object))if(Array.isArray(d.input)){const e=[];s.eachItem(d.input,(t,a,s,r)=>{if(!0===r)return e.length>0&&(i[u]=e),void o();const n=d.object[0];!0===n.$_nested?("object"!==typeof d.input&&(a=null),this.branch(n,a,(t,a)=>{Object.keys(a).length>0&&e.push(a),s()},u)):(d.input=a,d.access=n.$_access,d.result={},this.options.onAssign(d,()=>{const t=Object.values(d.result);t.length>0&&e.push(t[0]),s()}))})}else d.input=null,this.branch(d.object[0],null,(e,t)=>{o()},u);else!0===d.object.$_nested?("object"!==typeof d.input&&(d.input=null),this.branch(d.object,d.input,(e,t)=>{Object.keys(t).length>0&&(i[u]=t),o()},u)):(d.access=d.object.$_access,this.options.onAssign(d,o))})}}e.exports=function(e){const t=new r(e);t.branch(e.handler.schema,e.input,()=>{t.options.onEnd(t)})}},165:function(e,t,a){const s=a(104),r=a(146);class n{constructor(e){this.orgSchema=e,this.schema=r({},e),this._access={},this._accessStack=[]}branch(e,t){t=t||"";const a=s.getNO(e),n={};for(var i in a.nestedOptions){const e=a.nestedOptions[i];n[e[0]]=e[1]}for(var l in this._access=r(this._access,n),a.nestedObject.length>0&&(e.$_nested=!0),a.nestedObject){const e=a.nestedObject[l],r=s.getNO(e[1]),n=t.length>0?t+"."+e[0]:e[0];var o=e[1];Array.isArray(e[1])?(o=e[1][0]).$_array=!0:r.nestedObject.length>0&&(o.$_nested=!0),this._accessStack.push(this._access),delete this._access.$_nested,delete this._access.$_array,this.branch(o,n),o.$_access=this._access,this._access=this._accessStack.pop()}}}e.exports=function(e){const t=new n(e);return t.branch(t.schema),t}},166:function(e,t,a){const s=a(237),r=a(238),n=a(239),i=a(240),l=a(241),o=a(242),c=a(243),u=a(244),d=a(245),h=a(246),m=a(247),p=a(248),f=a(249),y=a(250),g=a(251),v=a(252),$=a(253),E=a(254);e.exports={String:s,Number:r,Select:n,Radio:i,Name:l,Email:o,Checkbox:c,Hash:u,URL:d,DateTimePicker:h,DatePicker:m,DatePickerRange:p,TimePicker:f,TimePickerRange:y,Slug:g,Color:v,FieldName:$,KV:E}},227:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAA/CAYAAABXXxDfAAACn0lEQVRoge2bv2sTYRjHv3epIq0WWwg4KFSxCA6NwSFToQ6Zg5NLKKj/geBgXZzs4CAuDtop5h9wlI4uxqVNKWL9GaHgEDUxTnrxXnnKE0nrXRvMk9zlnvczBe7y3vu5e+953vc9HgchFHP1kwAWAeQBXABwPOzcGNIEsA5gFUCpXElvB3XxH/lirk6SywCuAzg0QsJheABWACyVK+lm9zm75Iu5+hyApwBm4tBrYWoACuVKeqPT7F95Fn8OYDIBomG0AMx3bsCOPA/1tYQ+8b3QCMjSK+DygWUl4mDPu/TD4aj+ISHBrVcoCJ5xOZ1pEifId9HlPK6RPMlnlMpnSH4qBh2Jgik3fn0aHlZeK6rlx6QbvLjgYnI6dKXcN23P4MUzH96v/tsSl796awzO4Nx3+PjKw/Z703c74sN+0OKS2ICnFSuvFSuvFfE83wuNusGXz//3X983+NGQ6Uck8k/u/cbWuh/FpXcRybD3+5+ciWADnlasvFZsnpfEmIOXtafOOhifCL7vlAhqrw1a3wafEuhzlehVZuccjB8Nt5/NOLh0ObVvG2+qPh7cbEt2KxDxJ/92w/DzC2b6xP7ixMSx4eyI2ICnFSuvFSuvFfFUV7iWwunz4feUNiO+fzU4fCQ4ndEkafPlcNb64vL5K6kDZngO7t/w8G4z+kV9JF9snFQ8PuvYgKcVK68VKy9Ju4dluPczHnvX4nn+0Z02Zs6Fp7JWw+DTVjzkxXdyRgn177zQZ7+Ro0HyVaXyVZfLrzSySvIlrjzQBPmWXC64W1Em/5i8O9F+iauONECet9FJdVxpWOC6syTT4sLCJrrzPBfazSd4BNS6Cwqxd5LDB7IAHiYoCHrsk+0WJ3qtoqYipFGqxaGJG81fwquoAfwBWHur1tz2iAAAAAAASUVORK5CYII="},228:function(e,t,a){e.exports=a(461)},235:function(e,t,a){const s=a(146),r=a(165),n=a(164),i=a(163),l=a(104),o=a(236),c=a(166);e.exports=class{constructor(e,t){t||(t={}),t.set?this.set=o.get("F2020V1"):this.set=o.load("F2020V1",c),this.tree=t.tree||{},this.policy=t.policy||{required:!1,read:!0,write:!0}}resolver(e){return this.set[e]}fusion(e){this.tree=s(this.tree,e)}compile(e){e&&(this.tree=e);const t=(e,t,a,s)=>{for(var r in t.$_key=("."+s).split(".").pop(),a)t[r]=a[r];var n=null;if("string"===typeof a.$type){if(t.$type=this.resolver(a.$type),!t.$type)return console.error("Can not resolv type "+a.$type),!0;n=t.$type.class}else a.$type&&(n=a.$type.class);for(var i in t.$_type=n?new n(a.$options):void 0,t.$_wire="."+s,e&&(t.$_hidden=!0,t.$_wire=e+t.$_wire),this.policy){const e="$"+i,a=this.policy[i];e in t||(t[e]=a)}if(!e&&t.$_type&&a.$options){const e=t.$_type.sanatizeOptions(a.$options||{});t.$options=e}return!0},a=i(this.tree,t),s=i(a,(e,a,s,r)=>{if(s.$_type&&s.$_type.schematizer){const e=s.$_type.schematizer(s);if(null!==e){for(var n in s)a[n]=s[n];const r=i(e,t,s.$_wire);for(var n in r)a[n]=r[n];a.$_schematized=!0}else for(var n in s)a[n]=s[n]}else for(var n in s)a[n]=s[n];return!0});this.handler=r(a,this.resolver.bind(this)),this.handlerSchematized=r(s,this.resolver.bind(this))}export(e){return i(this.handler.schema,(t,a,s,r)=>{if(!0===s.$_hidden)return!0;for(var n in s)(l.leafPrivate.test(n)&&!0===e||l.leaf.test(n)&&!1===l.leafPrivate.test(n)&&!0!==e)&&(a[n]=s[n]);return"string"!==typeof a.$type&&a.$type&&(a.$type=a.$type.code),!0})}verify(e,t){const a={error:!1},s={handler:this.handlerSchematized,input:e,onAssign:(e,t)=>{const s=e.access,r=e.input;return!0!==s.$write?t():!0===s.$required&&void 0===r?(a.error=!0,a.fields||(a.fields={}),a.fields[e.line]="Required Field",t()):!0!==s.$required&&void 0===r?t():s.$_type?void s.$_type.verify(r,(s,n)=>{if(!0===s)return a.error=!0,a.fields||(a.fields={}),a.fields[e.line]=n,t();e.result[e.key]=r,t()}):(a.error=!0,a.fields||(a.fields={}),a.fields[e.line]="Need field interpretor",t())},onEnd:e=>{a.result=e.result,t(a)}};n(s)}filter(e,t){if(Array.isArray(e)){const a={error:!1,result:[]};l.eachItem(e,(e,s,r,n)=>{if(!0===n)return t(a);this._filterLine(s,({result:e})=>{a.result.push(e),r()})})}else this._filterLine(e,t)}encode(e,t){this.flow("encode",e,t)}decode(e,t){this.flow("decode",e,t)}flow(e,t,a){const s={error:!1},r={handler:this.handlerSchematized,input:t,onAssign:(t,a)=>{const s=t.access,r=t.result,n=t.input;s.$_type[e](n,e=>{r[t.key]=e,a()})},onEnd:e=>{s.result=e.result,a(s)}};n(r)}getLineup(e,t){const a=e.split(".");a.shift();for(var s=this.handler.schema,r=this.handler.schema,n=0;n<a.length;n++){var i=r[a[n]];if(s=r,Array.isArray(i)&&(i=i[0]),!i)return!0===t?{beforeLast:s,last:null,fields:a}:null;r=i}return!0===t?{beforeLast:s,last:r,fields:a}:r}setLineup(e,t){const a=this.getLineup(e,!0),s=a.beforeLast,r=a.fields[a.fields.length-1];return!!s&&(s[r]=t,t.$type&&"string"===typeof t.$type&&(t.$type=this.resolver(t.$type)),!0)}renameLineup(e,t){const a=this.getLineup(e,!0),s=a.beforeLast,r=s[a.fields[a.fields.length-1]];if(!s||!r)return!1;const n=t.split(".");n.shift();const i=n[n.length-1];return!!i&&(s[i]=r,!0)}removeLineup(e){const t=this.getLineup(e,!0),a=t.beforeLast,s=t.fields[t.fields.length-1];return!!a&&(delete a[s],!0)}_filterLine(e,t){const a={error:!1},s={handler:this.handlerSchematized,input:e,onAssign:(e,t)=>{const a=e.access,s=e.result,r=e.input;if(!0!==a.$read)return t();a.$_type.filter(r,(a,n)=>{if(!0!==a)return t();s[e.key]=r,t()})},onEnd:e=>{a.result=e.result,t(a)}};n(s)}}},236:function(e,t){e.exports=new class{constructor(){this.sets={}}load(e,t){return this.sets[e]||(this.sets[e]=t),this.sets[e]}get(e){return this.sets[e]}}},237:function(e,t,a){const s=a(44),r=/`|~|!|@|#|\$|%|\^|&|\*|\(|\)|\+|=|\[|\{|\]|\}|\||\\|'|<|,|\.|>|\?|\/|"|;|:/gm,n=/^[a-z0-9\-_\s]+$/i,i={code:"String",description:"String of characters"};i.class=class extends s{verify(e,t){return"string"!==typeof e?t(!0,"Not a string"):"min"in this.options&&e.length<this.options.min?t(!0,"String is too short (min: ".concat(this.options.min,")")):"max"in this.options&&e.length>this.options.max?t(!0,"String is too long (max: ".concat(this.options.max,")")):!0===this.options.strict&&e.match(r)?t(!0,"Forbidden special chars"):!0===this.options.unicode||n.test(e)?void t(!1):t(!0,"Unicode is forbidden")}configuration(){return{placeholder:{$doc:"Field placeholder",$required:!1,$type:"String"},help:{$doc:"Help / Bottom message",$required:!1,$type:"String"},min:{$doc:"Minimun length",$required:!1,$type:"Number",$options:{default:1}},max:{$doc:"Maximun length",$required:!1,$type:"Number",$options:{default:256}},strict:{$doc:"Strict Mode",$help:"Specials Chars Are Forbidden",$required:!1,$type:"Checkbox",$options:{default:!1}},unicode:{$doc:"Accept Unicode",$help:"Accept Char From Different Languages",$required:!1,$type:"Checkbox",$options:{default:!0}}}}},e.exports=i},238:function(e,t,a){const s=a(44),r={code:"Number",description:"Various Numbers"};r.class=class extends s{verify(e,t){if(isNaN(e))return t(!0,"Not a number");"string"===typeof e&&(e=parseInt(e));t(!1)}configuration(){return{acceptedTypes:{$doc:"What kind of number to accept",$required:!0,$type:"Select",$options:{default:"both",items:{both:"Both Integer & Float",integer:"Only Integer",float:"Only Float"}}}}}},e.exports=r},239:function(e,t,a){const s=a(44);e.exports={code:"Select",description:"Selector",class:class extends s{sanatizeOptions(e){return{placeholder:"string"===typeof e.placeholder?e.placeholder:void 0,help:"string"===typeof e.help?e.help:void 0,default:"string"===typeof e.default?e.default:void 0,items:"object"===typeof e.items?e.items:void 0}}configuration(){return{default:{$doc:"Default selection (key)",$required:!1,$type:"String"},items:{$doc:"Items in selector",$required:!0,$type:"KV"}}}}}},240:function(e,t,a){const s=a(44);e.exports={code:"Radio",description:"Radio Selector",class:class extends s{configuration(){return{default:{$doc:"Default selection (key)",$required:!1,$type:"String"},items:{$doc:"Items in selector",$required:!0,$type:"KV"},horizontal:{$doc:"Horizontal",$required:!1,$type:"Checkbox"}}}}}},241:function(e,t,a){const s=a(44);e.exports={code:"Name",description:"Name (first and last name)",class:class extends s{schematizer(){return{first:{$type:"String",$options:{strict:!0,min:2,max:128,unicode:!0}},last:{$type:"String",$options:{strict:!0,min:2,max:128,unicode:!0}}}}}}},242:function(e,t,a){const s=a(44),r=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;e.exports={code:"Email",description:"E-mail address",class:class extends s{verify(e,t){if("string"!==typeof e)return t(!0,"Not an e-mail");return!0!==r.test(e)?t(!0,"Invalid e-mail address"):t(!1)}encode(e,t){return e=e.toLowerCase(),t&&t(e),e}}}},243:function(e,t,a){const s=a(44);e.exports={code:"Checkbox",description:"Checkbox Options",class:class extends s{configuration(){return{placeholder:{$doc:"Field placeholder",$required:!1,$type:"String"}}}}}},244:function(e,t,a){const s=a(44),r=/\b[0-9a-f]{5,40}\b/,n=/\b[A-Fa-f0-9]{64}\b/,i=/\b[A-Fa-f0-9]{128}\b/;e.exports={code:"Hash",description:"Computer Hash",class:class extends s{constructor(e){switch(super(e),this.options.mode){case"sha1":this.verify=this.sha1Verifier.bind(this);break;default:case"sha256":this.verify=this.sha256Verifier.bind(this);break;case"sha512":this.verify=this.sha512Verifier.bind(this)}}sha1Verifier(e,t){if(!e)return t(!0,"Not a string");return!0!==r.test(e)?t(!0,"Not a SHA1 Hash"):t(!1)}sha256Verifier(e,t){if(!e)return t(!0,"Not a string");return!0!==n.test(e)?t(!0,"Not a SHA256 Hash"):t(!1)}sha512Verifier(e,t){if(!e)return t(!0,"Not a string");return!0!==i.test(e)?t(!0,"Not a SHA512 Hash"):t(!1)}configuration(){return{mode:{$doc:"Awaited hash type",$required:!1,$type:"Select",$options:{default:"sha256",items:{sha1:"SHA1",sha256:"SHA256",sha512:"SHA512"}}}}}}}},245:function(e,t,a){const s=a(44),r=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/g;e.exports={code:"URL",description:"URL",class:class extends s{constructor(e){super(e),this.options.maxLength||(this.options.maxLength=256),this.options.minLength||(this.options.minLength=8)}verifier(e,t){if(!e)return t&&t(!1),!1;if("string"!==typeof e)return t&&t(!1),!1;if(e.length<=0||e.length>this.options.maxLength)return t&&t(!1),!1;const a=r.test(e);return t&&t(a),a}}}},246:function(e,t,a){const s=a(44);e.exports={code:"DateTimePicker",description:"Date & Time Picker",class:class extends s{}}},247:function(e,t,a){const s=a(44);e.exports={code:"DatePicker",description:"Date Picker",class:class extends s{}}},248:function(e,t,a){const s=a(44);e.exports={code:"DatePickerRange",description:"Date Picker Range",class:class extends s{schematizer(){return{from:{$type:"DatePicker"},to:{$type:"DatePicker"}}}}}},249:function(e,t,a){const s=a(44);e.exports={code:"TimePicker",description:"Time Picker",class:class extends s{}}},250:function(e,t,a){const s=a(44);e.exports={code:"TimePickerRange",description:"Time PickerRange",class:class extends s{schematizer(){return{from:{$type:"TimePicker"},to:{$type:"TimePicker"}}}}}},251:function(e,t,a){const s=a(44),r=/^[a-z0-9]+(?:-[a-z0-9]+)*$/g;e.exports={code:"Slug",description:"Slug name",class:class extends s{verifier(e,t){if(!e)return t&&t(!1),!1;if("string"!==typeof e)return t&&t(!1),!1;const a=r.test(e);return t&&t(a),a}}}},252:function(e,t,a){const s=a(44),r=/^((0x){0,1}|#{0,1})([0-9A-F]{8}|[0-9A-F]{6})$/gi;e.exports={code:"Color",description:"HTML Color",class:class extends s{verifier(e,t){if(!e)return t&&t(!1),!1;if("string"!==typeof e)return t&&t(!1),!1;const a=r.test(e);return t&&t(a),a}}}},253:function(e,t,a){const s=a(44),r=/^([a-z0-9\-]+)$/i;e.exports={code:"FieldName",description:"Restricted Field Name",class:class extends s{verify(e,t){if(!e)return t(!0);if("string"!==typeof e)return t(!0,"Not a string");return r.test(e)?t(!1):t(!0,"Forbidden special chars")}}}},254:function(e,t,a){const s=a(44),r=/^([a-z0-9]+)$/i;e.exports={code:"KV",description:"Object with single Key / Value",class:class extends s{verify(e,t){if(!e||"object"!==typeof e||"Object"!==e.constructor.name)return t(!0,"Not a KV");for(var a in e){if(!r.test(a))return t(!0,"Invalid key name "+a)}t(!1)}configuration(){return{min:{$doc:"Minimun of items",$required:!1,$type:"Number",$options:{acceptedTypes:"integer"}},max:{$doc:"Maximun of items",$required:!1,$type:"Number",$options:{acceptedTypes:"integer"}}}}}}},255:function(e,t){e.exports=class{constructor(e,t){this.schema=e,this._value=t||{},this.verifying=!1}setValue(e){this._value=e}getValue(){return this._value}verify(e){this.schema.verify(this._value,e)}reset(){this._value={}}set(e,t){const a=this.get(e,!0);a&&(a.input[a.fields[a.fields.length-1]]=t)}get(e,t){const a=e.split(".");a.shift();for(var s,r,n=this.schema.handler.schema,i=this._value,l=0;l<a.length;l++){var o=a[l];isNaN(o)||(o=parseInt(o),a[l]=o)}var c=null;s=n;for(l=0;l<a.length-1;l++){if(s=n[o=a[l]],r=i[o],Array.isArray(s)){if(c=s[0],!r||!Array.isArray(r)){if(!0!==t)return null;i[o]=[]}n=s,i=r=i[o]}else{if(c){if(isNaN(o))return null;o=parseInt(o),s=c}if(!s)return null;if(r=i[o],(!0===s.$_nested||c&&!0===c.$_nested)&&(!r||"object"!==typeof r||"Object"!==r.constructor.name)){if(!0!==t)return null;i[o]={}}if(!(r=i[o])&&!0!==t)return null;n=s,i=r,c=null}}return{schema:n,input:i,fields:a}}remove(e){const t=this.get(e);if(t){const e=t.fields[t.fields.length-1];Array.isArray(t.input)?t.input.splice(e,1):delete t.input[t.fields[t.fields.length-1]]}}}},256:function(e){e.exports=JSON.parse('{"name":"fieldify","version":"1.2.3","description":"Fieldify object manipulation & validator","main":"index.js","scripts":{"test":"./node_modules/mocha/bin/mocha"},"repository":{"type":"git","url":"git+ssh://git@github.com/mykiimike/fieldify.git"},"keywords":["schema","validation","field","validator","manipulation","object","JSON","lodash"],"author":"Michael Vergoz","license":"GPL-3.0","bugs":{"url":"https://github.com/mykiimike/fieldify/issues"},"homepage":"https://github.com/mykiimike/fieldify#readme","dependencies":{"@fieldify/types":"^1.0.1"},"devDependencies":{"esdoc":"^1.1.0","esdoc-standard-plugin":"^1.0.0","eslint":"^7.5.0","eslint-config-standard":"^14.1.1","eslint-plugin-import":"^2.22.0","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","jest":"^25.5.4","mocha":"^7.2.0"}}')},44:function(e,t){e.exports=class{constructor(e){this.options=e||{}}encode(e,t){return t&&t(e),e}decode(e,t){return t&&t(e),e}verify(e,t){return t&&t(!1),!1}filter(e,t){return t&&t(!0),!0}schematizer(){return null}configuration(){return null}sanatizeOptions(e){return e}}},461:function(e,t,a){"use strict";a.r(t);a(161);var s=a(0),r=a.n(s),n=a(30),i=a.n(n),l=a(103),o=a(102),c=a(108),u=a(188),d=a(77),h=a(60),m=a(56),p=a(192),f=a(121),y=a(191),g=a(79),v=a(179),$=(a(189),a(155)),E=a(227),b=a.n(E);const x=o.Schema.FieldifySchemaBuilder,k=(o.Schema.FieldifySchema,o.Schema.FieldifySchemaForm),S=o.Schema.FieldifySchemaRender,C=c.a.TabPane;class A extends r.a.Component{constructor(e){super(e);this.state=this.cycle({schema:{company:{$doc:"Your company name",$type:"String",$position:0},name:{$doc:"Civility",$type:"Name",$position:1},email:{$doc:"Votre e-mail",$type:"Email",$position:2},age:{$doc:"Age",$type:"Number",$position:3},KV:{$doc:"Key and Value",$type:"KV",$position:4},types:{$doc:"What kind of number to accept",$required:!0,$type:"Select",$options:{default:"both",items:{both:"Both Integer & Float",integer:"Only Integer",float:"Only Float"}}},address:{$doc:"Address",home:{$doc:"Home",street:{$doc:"Street",$type:"String",$options:{min:2,placeholder:"Your street"}},zip:{$doc:"ZIP",$type:"String"},country:{$doc:"Country",$type:"String"}},work:{$doc:"Work",street:{$doc:"Street",$type:"String"},zip:{$doc:"ZIP",$type:"String"},country:{$doc:"Country",$type:"String"}}},nestedArray:[{$doc:"Array of Objects (nested)",name:{$doc:"Civility",$type:"Name",$position:1},description:{$doc:"Description",$type:"String",$options:{strict:!0}},price:{$doc:"Price",$type:"String"},$array:{min:2}}],inlinedArray:[{$required:!0,$doc:"Array of User Defined types (non-nested)",$type:"Name",$options:{min:2},$array:{min:2,max:100}}],inlinedArrayString:[{$required:!0,$doc:"Array of String type (non-nested)",$type:"String",$array:{min:1,max:100}}],Radio:{$type:"Radio",$doc:"Radio description",$options:{default:"1",items:{1:"Une cle",2:"2 Cle",3:"key 3"},horizontal:!1}},Checkbox:{$type:"Checkbox",$doc:"Checkbox description",$options:{placeholder:"With placeholder"}},DateTimePicker:{$type:"DateTimePicker",$doc:"DateTimePicker"},DatePicker:{$type:"DatePicker",$doc:"DatePicker"},DatePickerRange:{$type:"DatePickerRange",$doc:"DatePickerRange"},TimePicker:{$type:"TimePicker",$doc:"TimePicker"},TimePickerRange:{$type:"TimePickerRange",$doc:"TimePickerRange"}},input:{}},!0)}cycle(e,t){return{schema:e.schema,input:e.input,inputRender:Object(l.a)({},e.input),selector:{builder:!0,form:!1,rendered:!1},form:{layout:"horizontal",json:JSON.stringify(e.input,null,"  "),state:"Filling",color:"blue"},builder:{json:JSON.stringify(e.schema,null,"  ")},render:{layout:"horizontal"}}}builderChanged(e){const t={schema:e,builder:{json:JSON.stringify(e,null,"  ")}};this.setState(t)}formChanged(e,t){e.verify(e=>{const a={inputRender:Object(l.a)({},e.result),form:{layout:this.state.form.layout,data:e.result,json:JSON.stringify(t,null,"  ")}};!0===e.error?(a.form.color="orange",a.form.state="Verify Failed"):(a.form.color="green",a.form.state="Passed"),this.setState(a)})}selector(e,t){const a=Object(l.a)({},this.state.selector);a[e]=t,this.setState({selector:a})}render(){const e={padding:"8px"};return r.a.createElement(u.a,{style:{margin:"0 auto",padding:10}},r.a.createElement(d.a,null,r.a.createElement("h1",null,r.a.createElement("img",{src:b.a,width:40})," @fieldify/antd")),r.a.createElement(d.a,null,r.a.createElement("small",null,r.a.createElement("a",{href:"https://github.com/mykiimike/fieldify"},"Fieldify Engine")," v",$.version," / ",r.a.createElement("a",{href:"https://github.com/Fieldify/antd"},"Fieldify For antd")," v",o.Version)),r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(h.a,{checked:this.state.selector.builder,onChange:({target:e})=>this.selector("builder",e.checked)},"Show builder"),r.a.createElement(h.a,{checked:this.state.selector.form,onChange:({target:e})=>this.selector("form",e.checked)},"Show form"),r.a.createElement(h.a,{checked:this.state.selector.rendered,onChange:({target:e})=>this.selector("rendered",e.checked)},"Show rendered"))),r.a.createElement(d.a,null,!0===this.state.selector.builder?r.a.createElement(m.a,{sm:12,xxl:8},r.a.createElement("div",{style:e},r.a.createElement(p.a,{size:"small",title:"Pass #1 - Building"},r.a.createElement(c.a,{defaultActiveKey:"1"},r.a.createElement(C,{tab:"Visual Editor",key:"1"},r.a.createElement(x,{schema:this.state.schema,onChange:this.builderChanged.bind(this)})),r.a.createElement(C,{tab:"JSON Schema",key:"2"},r.a.createElement("pre",null,this.state.builder.json)))))):null,!0===this.state.selector.form?r.a.createElement(m.a,{sm:12,xxl:8},r.a.createElement("div",{style:e},r.a.createElement(p.a,{size:"small",title:r.a.createElement(r.a.Fragment,null,"Pass #2 - Filling Form ",r.a.createElement(f.a,{color:this.state.form.color},this.state.form.state))},r.a.createElement(c.a,{defaultActiveKey:"1"},r.a.createElement(C,{tab:"Visual Rendering",key:"1"},r.a.createElement(y.a,null,r.a.createElement(y.a.Item,{label:"Form Layout",name:"layout"},r.a.createElement(g.a.Group,{value:this.state.form.layout,onChange:({target:e})=>{this.setState({form:Object(l.a)(Object(l.a)({},this.state.form),{},{layout:e.value})})}},r.a.createElement(g.a.Button,{value:"horizontal"},"Horizontal"),r.a.createElement(g.a.Button,{value:"vertical"},"Vertical"),r.a.createElement(g.a.Button,{value:"inline"},"Inline")))),r.a.createElement(v.a,null),r.a.createElement(k,{schema:this.state.schema,input:this.state.input,layout:this.state.form.layout,onChange:this.formChanged.bind(this)})),r.a.createElement(C,{tab:"Sanatized JSON Input",key:"2"},r.a.createElement("pre",null,this.state.form.json)))))):null,!0===this.state.selector.rendered?r.a.createElement(m.a,{sm:12,xxl:8},r.a.createElement("div",{style:e},r.a.createElement(p.a,{size:"small",title:"Pass #3 - Final Result"},r.a.createElement(y.a,null,r.a.createElement(y.a.Item,{label:"Form Layout",name:"layout"},r.a.createElement(g.a.Group,{value:this.state.render.layout,onChange:({target:e})=>this.setState({render:{layout:e.value}})},r.a.createElement(g.a.Button,{value:"horizontal"},"Horizontal"),r.a.createElement(g.a.Button,{value:"vertical"},"Vertical"),r.a.createElement(g.a.Button,{value:"inline"},"Inline")))),r.a.createElement(v.a,null),r.a.createElement(S,{schema:this.state.schema,input:this.state.inputRender,layout:this.state.render.layout})))):null))}}var O=A;i.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[228,1,2]]]);
//# sourceMappingURL=main.57a70e25.chunk.js.map