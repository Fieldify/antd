(this["webpackJsonp@fieldify/antd-example"]=this["webpackJsonp@fieldify/antd-example"]||[]).push([[0],{121:function(e,t){function n(e,t){for(var a in t){var r=t[a];Array.isArray(r)?(Array.isArray(e[a])||(e[a]=[{}]),n(e[a][0],r[0])):r&&"object"===typeof r&&"Object"===r.constructor.name?(e[a]||(e[a]={}),n(e[a],r)):e[a]=t[a]}}e.exports=function(e,t){var a={};return n(a,e),n(a,t),a}},150:function(e,t,n){var a=n(79);e.exports=function e(t,n,r,i,s){var o=a.getNO(t).nestedObject,l={};if(!1===s&&!1===n(r,l,t,i))return l;for(var u in o){var c=o[u][0],h=t[c],p=i;i=i?i+"."+c:c,Array.isArray(h)?(l[c]=[e(h[0],n,r,i,!1)],0===Object.keys(l[c][0]).length&&delete l[c]):(l[c]=e(h,n,r,i,!1),0===Object.keys(l[c]).length&&delete l[c]),i=p}if(!1!==s)for(var d in l){var f=l[d];"object"===typeof f&&0===Object.keys(f)&&delete l[d]}return l}},151:function(e,t,n){var a=n(16),r=n(19),i=n(79),s=function(){"use strict";function e(t){a(this,e),this.options=t,this.handler=t.handler,this.result={},this.level=0,t.onAssign=t.onAssign||function(e,t){e.result[e.key]=e.input,t()},t.onEnter=t.onEnter||function(e){},t.onLeave=t.onLeave||function(e){},t.onEnd=t.onEnd||function(e){}}return r(e,[{key:"branch",value:function(e,t,n,a){var r=this;a=a||".";var s=i.getNO(e),o={};this.level++,this.options.onEnter(e),i.eachItem(s.nestedObject,(function(s,l,u,c){if(!0===c)return r.level--,r.options.onLeave(e),void(0===r.level?(r.result=o,n(r,o)):n(r,o));var h=l[0],p={iterator:r,key:h,object:l[1],input:t?t[l[0]]:null,line:a+h,result:o};if(Array.isArray(p.object))if(Array.isArray(p.input)){var d=[];i.eachItem(p.input,(function(e,t,n,a){if(!0===a)return d.length>0&&(o[h]=d),void u();var i=p.object[0];!0===i.$_nested?("object"!==typeof p.input&&(t=null),r.branch(i,t,(function(e,t){Object.keys(t).length>0&&d.push(t),n()}),h)):(p.input=t,p.access=i.$_access,p.result={},r.options.onAssign(p,(function(){var e=Object.values(p.result);e.length>0&&d.push(e[0]),n()})))}))}else p.input=null,r.branch(p.object[0],null,(function(e,t){u()}),h);else!0===p.object.$_nested?("object"!==typeof p.input&&(p.input=null),r.branch(p.object,p.input,(function(e,t){Object.keys(t).length>0&&(o[h]=t),u()}),h)):(p.access=p.object.$_access,r.options.onAssign(p,u))}))}}]),e}();e.exports=function(e){var t=new s(e);t.branch(e.handler.schema,e.input,(function(){t.options.onEnd(t)}))}},152:function(e,t,n){var a=n(16),r=n(19),i=n(79),s=n(121),o=function(){"use strict";function e(t){a(this,e),this.orgSchema=t,this.schema=s({},t),this._access={},this._accessStack=[]}return r(e,[{key:"branch",value:function(e,t){t=t||"";var n=i.getNO(e),a={};for(var r in n.nestedOptions){var o=n.nestedOptions[r];a[o[0]]=o[1]}for(var l in this._access=s(this._access,a),n.nestedObject.length>0&&(e.$_nested=!0),n.nestedObject){var u=n.nestedObject[l],c=i.getNO(u[1]),h=t.length>0?t+"."+u[0]:u[0],p=u[1];Array.isArray(u[1])?(p=u[1][0]).$_array=!0:c.nestedObject.length>0&&(p.$_nested=!0),this._accessStack.push(this._access),delete this._access.$_nested,delete this._access.$_array,this.branch(p,h),p.$_access=this._access,this._access=this._accessStack.pop()}}}]),e}();e.exports=function(e){var t=new o(e);return t.branch(t.schema),t}},153:function(e,t,n){var a=n(210),r=n(216),i=n(217),s=n(218),o=n(219),l=n(220),u=n(221),c=n(222),h=n(223),p=n(224),d=n(225),f=n(226),m=n(227);e.exports={String:a,Number:r,Select:i,Name:s,Email:o,Checkbox:l,Hash:u,URL:c,DatePicker:h,Slug:p,Color:d,FieldName:f,KV:m}},201:function(e,t,n){e.exports=n(403)},202:function(e,t,n){},209:function(e,t,n){var a=n(16),r=n(19),i=n(121),s=n(152),o=n(151),l=n(150),u=n(79),c=n(153),h=function(){"use strict";function e(t,n){a(this,e),n||(n={}),this.tree=n.tree||{},this.policy=n.policy||{read:!0,write:!0}}return r(e,[{key:"resolver",value:function(e){return c[e]}},{key:"fusion",value:function(e){this.tree=i(this.tree,e)}},{key:"compile",value:function(e){var t=this;e&&(this.tree=e);var n=function(e,n,a,r){for(var i in n.$_key=("."+r).split(".").pop(),a)n[i]=a[i];var s=null;if("string"===typeof a.$type){if(n.$type=t.resolver(a.$type),!n.$type)return console.error("Can not resolv type "+a.$type),!0;s=n.$type.class}else a.$type&&(s=a.$type.class);if(n.$_type=s?new s(a.$options):void 0,n.$_wire="."+r,e&&(n.$_hidden=!0,n.$_wire=e+n.$_wire),n.$read="$read"in n?n.$read:t.policy.read,n.$write="$write"in n?n.$write:t.policy.write,!e&&n.$_type&&a.$options){var o=n.$_type.sanatizeOptions(a.$options||{});n.$options=o}return!0},a=l(this.tree,n),r=l(a,(function(e,t,a,r){if(a.$_type&&a.$_type.schematizer){var i=a.$_type.schematizer(a);if(null!==i){for(var s in a)t[s]=a[s];var o=l(i,n,a.$_wire);for(var s in o)t[s]=o[s];t.$_schematized=!0}else for(var s in a)t[s]=a[s]}else for(var s in a)t[s]=a[s];return!0}));this.handler=s(a,this.resolver.bind(this)),this.handlerSchematized=s(r,this.resolver.bind(this))}},{key:"export",value:function(e){return l(this.handler.schema,(function(t,n,a,r){if(!0===a.$_hidden)return!0;for(var i in a)(u.leafPrivate.test(i)&&!0===e||u.leaf.test(i)&&!1===u.leafPrivate.test(i)&&!0!==e)&&(n[i]=a[i]);return"string"!==typeof n.$type&&n.$type&&(n.$type=n.$type.code),!0}))}},{key:"verify",value:function(e,t){var n={error:!1},a={handler:this.handlerSchematized,input:e,onAssign:function(e,t){var a=e.access,r=e.input;return!0!==a.$write?t():!0===a.$required&&void 0===r?(n.error=!0,n.fields||(n.fields={}),n.fields[e.line]="Required Field",t()):!0!==a.$required&&void 0===r?t():a.$_type?void a.$_type.verify(r,(function(a,i){if(!0===a)return n.error=!0,n.fields||(n.fields={}),n.fields[e.line]=i,t();e.result[e.key]=r,t()})):(n.error=!0,n.fields||(n.fields={}),n.fields[e.line]="Need field interpretor",t())},onEnd:function(e){n.result=e.result,t(n)}};o(a)}},{key:"filter",value:function(e,t){var n=this;if(Array.isArray(e)){var a={error:!1,result:[]};u.eachItem(e,(function(e,r,i,s){if(!0===s)return t(a);n._filterLine(r,(function(e){var t=e.result;a.result.push(t),i()}))}))}else this._filterLine(e,t)}},{key:"encode",value:function(e,t){this.flow("encode",e,t)}},{key:"decode",value:function(e,t){this.flow("decode",e,t)}},{key:"flow",value:function(e,t,n){var a={error:!1},r={handler:this.handlerSchematized,input:t,onAssign:function(t,n){var a=t.access,r=t.result,i=t.input;a.$_type[e](i,(function(e){r[t.key]=e,n()}))},onEnd:function(e){a.result=e.result,n(a)}};o(r)}},{key:"getLineup",value:function(e,t){var n=e.split(".");n.shift();for(var a=this.handler.schema,r=this.handler.schema,i=0;i<n.length;i++){var s=r[n[i]];if(a=r,Array.isArray(s)&&(s=s[0]),!s)return!0===t?{beforeLast:a,last:null,fields:n}:null;r=s}return!0===t?{beforeLast:a,last:r,fields:n}:r}},{key:"setLineup",value:function(e,t){var n=this.getLineup(e,!0),a=n.beforeLast,r=n.fields[n.fields.length-1];return!!a&&(a[r]=t,t.$type&&"string"===typeof t.$type&&(t.$type=this.resolver(t.$type)),!0)}},{key:"renameLineup",value:function(e,t){var n=this.getLineup(e,!0),a=n.beforeLast,r=a[n.fields[n.fields.length-1]];if(!a||!r)return!1;var i=t.split(".");i.shift();var s=i[i.length-1];return!!s&&(a[s]=r,!0)}},{key:"removeLineup",value:function(e){var t=this.getLineup(e,!0),n=t.beforeLast,a=t.fields[t.fields.length-1];return!!n&&(delete n[a],!0)}},{key:"_filterLine",value:function(e,t){var n={error:!1},a={handler:this.handlerSchematized,input:e,onAssign:function(e,t){var n=e.access,a=e.result,r=e.input;if(!0!==n.$read)return t();n.$_type.filter(r,(function(n,i){if(!0!==n)return t();a[e.key]=r,t()}))},onEnd:function(e){n.result=e.result,t(n)}};o(a)}}]),e}();e.exports=h},21:function(e,t,n){var a=n(16),r=n(19);e.exports=function(){"use strict";function e(t){a(this,e),this.options=t||{}}return r(e,[{key:"encode",value:function(e,t){return t&&t(e),e}},{key:"decode",value:function(e,t){return t&&t(e),e}},{key:"verify",value:function(e,t){return t&&t(!1),!1}},{key:"filter",value:function(e,t){return t&&t(!0),!0}},{key:"schematizer",value:function(){return null}},{key:"configuration",value:function(){return null}},{key:"sanatizeOptions",value:function(e){return{}}}]),e}()},210:function(e,t,n){var a=n(16),r=n(19),i=n(23),s=n(24),o=n(21),l=/`|~|!|@|#|\$|%|\^|&|\*|\(|\)|\+|=|\[|\{|\]|\}|\||\\|'|<|,|\.|>|\?|\/|"|;|:/gm,u=/^[a-z0-9\-_\s]+$/i,c={code:"String",description:"String of characters"},h=function(e){"use strict";i(n,e);var t=s(n);function n(){return a(this,n),t.apply(this,arguments)}return r(n,[{key:"verify",value:function(e,t){return"string"!==typeof e?t(!0,"Not a string"):"min"in this.options&&e.length<this.options.min?t(!0,"String is too short (min: ".concat(this.options.min,")")):"max"in this.options&&e.length>this.options.max?t(!0,"String is too long (max: ".concat(this.options.max,")")):!0===this.options.strict&&e.match(l)?t(!0,"Forbidden special chars"):!1!==this.options.unicode||u.test(e)?void t(!1):t(!0,"Unicode is forbidden")}},{key:"sanatizeOptions",value:function(e){return{placeholder:"string"===typeof e.placeholder?e.placeholder:void 0,help:"string"===typeof e.help?e.help:void 0,min:"number"===typeof e.min?e.min:void 0,max:"number"===typeof e.max?e.max:void 0,strict:"boolean"===typeof e.strict?e.strict:void 0,unicode:"boolean"===typeof e.unicode?e.unicode:void 0}}},{key:"configuration",value:function(){return{placeholder:{$doc:"Field placeholder",$required:!1,$type:"String"},help:{$doc:"Help / Bottom message",$required:!1,$type:"String"}}}}]),n}(o);c.class=h,e.exports=c},216:function(e,t,n){var a=n(16),r=n(19),i=n(23),s=n(24),o={code:"Number",description:"Various Numbers"};var l=function(e){"use strict";i(n,e);var t=s(n);function n(){return a(this,n),t.apply(this,arguments)}return r(n,[{key:"verify",value:function(e,t){if(isNaN(e))return t(!0,"Not a number");"string"===typeof e&&(e=parseInt(e));t(!1)}},{key:"sanatizeOptions",value:function(e){return{}}},{key:"configuration",value:function(){return{acceptedTypes:{$doc:"What kind of number to accept",$required:!0,$type:"Select",$options:{default:"both",items:{both:"Both Integer & Float",integer:"Only Integer",float:"Only Float"}}}}}}]),n}(n(21));o.class=l,e.exports=o},217:function(e,t,n){var a=n(16),r=n(19),i=n(23),s=n(24),o=function(e){"use strict";i(n,e);var t=s(n);function n(){return a(this,n),t.apply(this,arguments)}return r(n,[{key:"sanatizeOptions",value:function(e){return{placeholder:"string"===typeof e.placeholder?e.placeholder:void 0,help:"string"===typeof e.help?e.help:void 0,default:"string"===typeof e.default?e.default:void 0,items:"object"===typeof e.items?e.items:void 0}}},{key:"configuration",value:function(){return{default:{$doc:"Default selection (key)",$required:!1,$type:"String"},items:{$doc:"Items in selector",$required:!0,$type:"KV"}}}}]),n}(n(21));e.exports={code:"Select",description:"Selector",class:o}},218:function(e,t,n){var a=n(16),r=n(19),i=n(23),s=n(24),o=function(e){"use strict";i(n,e);var t=s(n);function n(){return a(this,n),t.apply(this,arguments)}return r(n,[{key:"schematizer",value:function(){return{first:{$type:"String",$options:{strict:!0,min:2,max:128,unicode:!1}},last:{$type:"String",$options:{strict:!0,min:2,max:128,unicode:!0}}}}}]),n}(n(21));e.exports={code:"Name",description:"Name (first and last name)",class:o}},219:function(e,t,n){var a=n(16),r=n(19),i=n(23),s=n(24),o=n(21),l=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/,u=function(e){"use strict";i(n,e);var t=s(n);function n(){return a(this,n),t.apply(this,arguments)}return r(n,[{key:"verify",value:function(e,t){return"string"!==typeof e?t(!0,"Not an e-mail"):!0!==l.test(e)?t(!0,"Invalid e-mail address"):t(!1)}},{key:"encode",value:function(e,t){return e=e.toLowerCase(),t&&t(e),e}}]),n}(o);e.exports={code:"Email",description:"E-mail address",class:u}},220:function(e,t,n){var a=n(16),r=n(23),i=n(24),s=function(e){"use strict";r(n,e);var t=i(n);function n(){return a(this,n),t.apply(this,arguments)}return n}(n(21));e.exports={code:"Checkbox",description:"Checkbox options",class:s}},221:function(e,t,n){var a=n(16),r=n(19),i=n(154),s=n(23),o=n(24),l=n(21),u=/\b[0-9a-f]{5,40}\b/,c=/\b[A-Fa-f0-9]{64}\b/,h=/\b[A-Fa-f0-9]{128}\b/,p=function(e){"use strict";s(n,e);var t=o(n);function n(e){var r;switch(a(this,n),(r=t.call(this,e)).options.mode){case"sha1":r.verify=r.sha1Verifier.bind(i(r));break;default:case"sha256":r.verify=r.sha256Verifier.bind(i(r));break;case"sha512":r.verify=r.sha512Verifier.bind(i(r))}return r}return r(n,[{key:"sha1Verifier",value:function(e,t){if(!e)return t&&t(!1),!1;var n=u.test(e);return t&&t(n),n}},{key:"sha256Verifier",value:function(e,t){if(!e)return t&&t(!1),!1;var n=c.test(e);return t&&t(n),n}},{key:"sha512Verifier",value:function(e,t){if(!e)return t&&t(!1),!1;var n=h.test(e);return t&&t(n),n}}]),n}(l);e.exports={code:"Hash",description:"Computer Hash",class:p}},222:function(e,t,n){var a=n(16),r=n(19),i=n(23),s=n(24),o=n(21),l=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/g,u=function(e){"use strict";i(n,e);var t=s(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).options.maxLength||(r.options.maxLength=256),r.options.minLength||(r.options.minLength=8),r}return r(n,[{key:"verifier",value:function(e,t){if(!e)return t&&t(!1),!1;if("string"!==typeof e)return t&&t(!1),!1;if(e.length<=0||e.length>this.options.maxLength)return t&&t(!1),!1;var n=l.test(e);return t&&t(n),n}}]),n}(o);e.exports={code:"URL",description:"URL",class:u}},223:function(e,t,n){var a=n(16),r=n(23),i=n(24),s=function(e){"use strict";r(n,e);var t=i(n);function n(e){var r;return a(this,n),"range"in(r=t.call(this,e)).options||(r.options.range=!1),r}return n}(n(21));e.exports={code:"DatePicker",description:"Date Picker",class:s}},224:function(e,t,n){var a=n(16),r=n(19),i=n(23),s=n(24),o=n(21),l=/^[a-z0-9]+(?:-[a-z0-9]+)*$/g,u=function(e){"use strict";i(n,e);var t=s(n);function n(){return a(this,n),t.apply(this,arguments)}return r(n,[{key:"verifier",value:function(e,t){if(!e)return t&&t(!1),!1;if("string"!==typeof e)return t&&t(!1),!1;var n=l.test(e);return t&&t(n),n}}]),n}(o);e.exports={code:"Slug",description:"Slug name",class:u}},225:function(e,t,n){var a=n(16),r=n(19),i=n(23),s=n(24),o=n(21),l=/^((0x){0,1}|#{0,1})([0-9A-F]{8}|[0-9A-F]{6})$/gi,u=function(e){"use strict";i(n,e);var t=s(n);function n(){return a(this,n),t.apply(this,arguments)}return r(n,[{key:"verifier",value:function(e,t){if(!e)return t&&t(!1),!1;if("string"!==typeof e)return t&&t(!1),!1;var n=l.test(e);return t&&t(n),n}}]),n}(o);e.exports={code:"Color",description:"HTML Color",class:u}},226:function(e,t,n){var a=n(16),r=n(19),i=n(23),s=n(24),o=n(21),l=/^([a-z0-9]+)$/i,u=function(e){"use strict";i(n,e);var t=s(n);function n(){return a(this,n),t.apply(this,arguments)}return r(n,[{key:"verify",value:function(e,t){return e?"string"!==typeof e?t(!0,"Not a string"):l.test(e)?t(!1):t(!0,"Forbidden special chars"):t(!0)}}]),n}(o);e.exports={code:"FieldName",description:"Restricted Field Name",class:u}},227:function(e,t,n){var a=n(16),r=n(19),i=n(23),s=n(24),o=n(21),l=/^([a-z0-9]+)$/i,u=function(e){"use strict";i(n,e);var t=s(n);function n(){return a(this,n),t.apply(this,arguments)}return r(n,[{key:"verify",value:function(e,t){if(!e||"object"!==typeof e||"Object"!==e.constructor.name)return t(!0,"Not a KV");for(var n in e){if(!l.test(n))return t(!0,"Invalid key name "+n)}t(!1)}},{key:"configuration",value:function(){return{min:{$doc:"Minimun of items",$required:!1,$type:"Number",$options:{acceptedTypes:"integer"}},max:{$doc:"Maximun of items",$required:!1,$type:"Number",$options:{acceptedTypes:"integer"}}}}}]),n}(o);e.exports={code:"KV",description:"Object with single Key / Value",class:u}},228:function(e,t,n){var a=n(16),r=n(19),i=function(){"use strict";function e(t,n){a(this,e),this.schema=t,this._value=n||{},this.verifying=!1}return r(e,[{key:"setValue",value:function(e){this._value=e}},{key:"getValue",value:function(){return this._value}},{key:"verify",value:function(e){this.schema.verify(this._value,e)}},{key:"reset",value:function(){this._value={}}},{key:"set",value:function(e,t){var n=this.get(e,!0);n&&(n.input[n.fields[n.fields.length-1]]=t)}},{key:"get",value:function(e,t){var n=e.split(".");n.shift();for(var a,r,i=this.schema.handler.schema,s=this._value,o=0;o<n.length;o++){var l=n[o];isNaN(l)||(l=parseInt(l),n[o]=l)}var u=null;a=i;for(o=0;o<n.length-1;o++){if(a=i[l=n[o]],r=s[l],Array.isArray(a)){if(u=a[0],!r||!Array.isArray(r)){if(!0!==t)return null;s[l]=[]}i=a,s=r=s[l]}else{if(u){if(isNaN(l))return null;l=parseInt(l),a=u}if(!a)return null;if(r=s[l],(!0===a.$_nested||u&&!0===u.$_nested)&&(!r||"object"!==typeof r||"Object"!==r.constructor.name)){if(!0!==t)return null;s[l]={}}if(!(r=s[l])&&!0!==t)return null;i=a,s=r,u=null}}return{schema:i,input:s,fields:n}}},{key:"remove",value:function(e){var t=this.get(e);if(t){var n=t.fields[t.fields.length-1];Array.isArray(t.input)?t.input.splice(n,1):delete t.input[t.fields[t.fields.length-1]]}}}]),e}();e.exports=i},401:function(e,t,n){},403:function(e,t,n){"use strict";n.r(t);n(202);var a=n(0),r=n.n(a),i=n(2),s=n.n(i),o=n(89),l=n(100),u=n(101),c=n(117),h=n(116),p=n(7),d=n(149),f=n(52),m=n(177),y=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e,a,r){var i;return Object(l.a)(this,n),(i=t.call(this,e,a,r)).state=i.cycle(e,!0),i}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t){Object(d.a)(Object(f.a)(n.prototype),"componentDidUpdate",this)&&Object(d.a)(Object(f.a)(n.prototype),"componentDidUpdate",this).call(this,e,t);var a=!1;for(var r in e)if("function"!==typeof e[r]&&e[r]!==this.props[r]){a=!0;break}if(!0===a){var i=this.cycle(this.props,!1);i&&"object"===typeof i&&this.setState(i)}}},{key:"cycle",value:function(e,t){return{}}}]),n}(n.n(m).a.Component),v=n(408),g=n(410),$=n(412),E=n(405),b=n(415),k=n(78),S=n(32),x=n(88),C=n(87),_=n(409),O=n(413),w=n(407),j=n(18),z=n(414),A=n(411),N=n(77),I=n(416),F=n(417),V=n(418),T=n(419),P=n(420),R=n(421),L=n(422),q=n(423),D=n(424),B=n(425),K=n(426),U=n(427);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function H(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var J=function(e){function t(t){var n;return(n=e.call(this,t)||this).state=n.cycle(t),n}H(t,e);var n=t.prototype;return n.componentDidUpdate=function(e,t){if(this.props.schema!==e.schema){var n=this.cycle(this.props);this.setState(n)}},n.cycle=function(e){this.schema=e.schema;var t={value:e.value,verify:e.verify,feedback:!1,status:null,options:{}};return this.isInjected=e.isInjected,this.onChange=e.onChange?e.onChange:function(){},this.onError=e.onError?e.onError:function(){},this.schema?(t.help=this.schema.$help,t.options=this.schema.$options||{},this.handler=this.schema.$_type,t):(this.schema={},t)},n.timedChange=function(e,t){var n=this;if(this._changeTimer)return this._changeTimerQueue++,void(this._changeTimerCb=e);(e=e||this._changeTimerCb)&&(delete this._changeTimerCb,this._changeTimerQueue=0,this._changeTimer=setTimeout((function(){e((function(){delete n._changeTimer,n._changeTimerQueue>0&&n.timedChange(e,t)}))}),t))},n.changeValue=function(e,t){var n=this;t=t||100,this.setState({value:e}),this._lastValue=e,this.timedChange((function(e){n.verify(n._lastValue,(function(t){n.setState(t),"success"===t.status?(n.onChange(n.schema,n._lastValue),e()):e()}))}),t)},n.verify=function(e,t){var n=this;if(!this.handler)return t({status:"error",feedback:!0,help:"No Handler on verifier"});this.handler.verify(e,(function(e,a){return!1===e?(n.onError(!1),t({status:"success",feedback:!0,help:null})):(n.onError(!0,a),t({status:"error",feedback:!0,help:a}))}))},n.render=function(e){return!0===this.isInjected?r.a.createElement(v.a.Item,{label:this.schema.$doc,required:this.schema.$required,validateStatus:this.state.status,hasFeedback:this.state.feedback,help:this.state.help,style:{marginBottom:"0px"},wrapperCol:{sm:24}},e):r.a.createElement(v.a.Item,{label:this.schema.$doc,required:this.schema.$required,validateStatus:this.state.status,hasFeedback:this.state.feedback,help:this.state.help,style:{marginBottom:"8px"},wrapperCol:{sm:24}},e)},t}(a.Component),Y=function(e){function t(){return e.apply(this,arguments)||this}H(t,e);var n=t.prototype;return n.cycle=function(e){return{schema:e.schema,value:e.value,injected:e.injected}},n.subRender=function(e){return!0===this.state.injected?r.a.createElement(v.a.Item,{label:this.state.schema.$doc,hasFeedback:!0,validateStatus:"success",style:{marginBottom:"0px"},wrapperCol:{sm:24}},e):r.a.createElement(v.a.Item,{label:this.state.schema.$doc,hasFeedback:!0,validateStatus:"success"},e)},n.render=function(){return this.subRender(r.a.createElement("div",{style:{width:"100%"}},this.state.value))},t}(y),Q=function(e){function t(t){var n;return(n=e.call(this,t)||this).props=t,t.match&&(n.path=t.match.path),n.state={},n}return H(t,e),t.prototype.componentDidUpdate=function(e,t){},t}(a.Component),W=function(e){function t(t){var n;return(n=e.call(this,t)||this).props=t,n.onChange=t.onChange?t.onChange:function(){},t.match&&(n.path=t.match.path),n.state=M({},t.options),n.default={},n}H(t,e);var n=t.prototype;return n.componentDidUpdate=function(e,t){var n=this.props.options||{},a=e.options||{},r=0;for(var i in this.default){a[i]!==n[i]&&r++}r>0&&(this.setState(n),this.onChange(M({},n)))},n.setup=function(e){var t=M({},e);for(var n in t){this.default[n]||delete t[n]}for(var n in this.default)n in t||(t[n]=this.default[n]);return t},n.configure=function(){this.state=this.setup(this.state),this.onChange(M({},this.state))},n.changeIt=function(e,t){var n=Object.assign({},this.state);n[e]=t,this.setState(n),this.onChange(M({},n))},t}(a.Component),G=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){var t=this;return e.prototype.render.call(this,r.a.createElement(g.a,{value:this.state.value,placeholder:this.state.options.placeholder,onChange:function(e){var n=e.target;return t.changeValue(n.value)},style:{width:"100%"}}))},t}(J),Z=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t}(Y),X=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){return r.a.createElement("span",null,r.a.createElement($.a,{color:"#fadb14",style:{color:"#555555"}},r.a.createElement(F.a,null)))},t}(Q),ee=function(e){function t(t){var n;return(n=e.call(this,t)||this).default={minSize:1,maxSize:128},n.configure(),n}return H(t,e),t.prototype.render=function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v.a.Item,{label:"String min/max size"},r.a.createElement(E.a,null,r.a.createElement(b.a,{min:0,value:this.state.minSize,onChange:function(t){return e.changeIt("minSize",t)}}),r.a.createElement(b.a,{min:0,value:this.state.maxSize,onChange:function(t){return e.changeIt("maxSize",t)}}))))},t}(W),te={code:p.types.String.code,description:p.types.String.description,class:p.types.String.class,Info:X,Builder:ee,Form:G,Render:Z},ne=te.Form,ae=function(e){function t(t){return e.call(this,t)||this}H(t,e);var n=t.prototype;return n.cycle=function(t){var n=e.prototype.cycle.call(this,t);return n.value||(n.value={}),this.result=M({},n.value),n},n.error=function(e,t,n){},n.setField=function(e,t,n){this.result[e]=n,this.onChange(this.schema,this.result)},n.render=function(){var t=this;return e.prototype.render.call(this,r.a.createElement(k.a,{gutter:16},r.a.createElement(S.a,{className:"gutter-row",span:12},r.a.createElement(ne,{schema:this.schema.first,verify:this.state.verify,value:this.state.value.first,onChange:function(e,n){return t.setField("first",e,n)},isInjected:!0})),r.a.createElement(S.a,{className:"gutter-row",span:12},r.a.createElement(ne,{schema:this.schema.last,verify:this.state.verify,value:this.state.value.last,onChange:function(e,n){return t.setField("last",e,n)},isInjected:!0}))))},t}(J),re=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){return r.a.createElement("span",null,r.a.createElement($.a,{color:"#36cfc9",style:{color:"#555555"}},r.a.createElement(V.a,null)))},t}(Q),ie=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.getDerivedStateFromProps=function(e,t){if(t.value&&"object"===typeof t.value){var n="";t.value.first&&(n+=t.value.first),t.value.last&&(n+=" "+t.value.last),t.value=n.trim()}return t},t}(Y),se=function(e){function t(t){var n;return(n=e.call(this,t)||this).default={minSize:1,maxSize:128},n.configure(),n}return H(t,e),t.prototype.render=function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v.a.Item,{label:"Name min/max size"},r.a.createElement(E.a,null,r.a.createElement(b.a,{min:0,value:this.state.minSize,onChange:function(t){return e.changeIt("minSize",t)}}),r.a.createElement(b.a,{min:0,value:this.state.maxSize,onChange:function(t){return e.changeIt("maxSize",t)}}))))},t}(W),oe={code:p.types.Name.code,description:p.types.Name.description,class:p.types.Name.class,Info:re,Builder:se,Form:ae,Render:ie,noFormItem:!0},le=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){var t=this;return e.prototype.render.call(this,r.a.createElement(g.a,{value:this.state.value,placeholder:this.state.options.placeholder,onChange:function(e){var n=e.target;return t.changeValue(n.value)}}))},t}(J),ue=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){return r.a.createElement("span",null,r.a.createElement($.a,{color:"#1890ff"},r.a.createElement(T.a,null)))},t}(Q),ce=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t}(Y),he=function(e){function t(t){var n;return(n=e.call(this,t)||this).default={subAddressing:!0},n.configure(),n}return H(t,e),t.prototype.render=function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v.a.Item,{label:"Sub-addressing"},r.a.createElement(x.a,{checked:this.state.subAddressing,onChange:function(t){var n=t.target;return e.changeIt("subAddressing",n.checked)}},"Allowed")))},t}(W),pe={code:p.types.Email.code,description:p.types.Email.description,class:p.types.Email.class,Info:ue,Builder:he,Form:le,Render:ce},de=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){var t=this;return e.prototype.render.call(this,r.a.createElement(b.a,{value:this.state.value,placeholder:this.state.options.placeholder,onChange:function(e){return t.changeValue(e)},style:{width:"100%"}}))},t}(J),fe=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){return r.a.createElement("span",null,r.a.createElement($.a,{color:"#ff7a45"},r.a.createElement(P.a,null)))},t}(Q),me=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t}(Y),ye=function(e){function t(t){var n;return(n=e.call(this,t)||this).default={minSize:1,maxSize:128},n.configure(),n}return H(t,e),t.prototype.render=function(){return r.a.createElement("div",null)},t}(W),ve={code:p.types.Number.code,description:p.types.Number.description,class:p.types.Number.class,Info:fe,Builder:ye,Form:de,Render:me},ge=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){return e.prototype.render.call(this,r.a.createElement(g.a,{placeholder:"Checkbox of characters"}))},t}(J),$e=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){return r.a.createElement("span",null,r.a.createElement($.a,{color:"#fadb14",style:{color:"#555555"}},r.a.createElement(F.a,null)))},t}(Q),Ee=function(e){function t(t){var n;return(n=e.call(this,t)||this).default={minSize:1,maxSize:128},n.configure(),n}return H(t,e),t.prototype.render=function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v.a.Item,{label:"Checkbox min/max size"},r.a.createElement(E.a,null,r.a.createElement(b.a,{min:0,value:this.state.minSize,onChange:function(t){return e.changeIt("minSize",t)}}),r.a.createElement(b.a,{min:0,value:this.state.maxSize,onChange:function(t){return e.changeIt("maxSize",t)}}))))},t}(W),be={code:p.types.Checkbox.code,description:p.types.Checkbox.description,class:p.types.Checkbox.class,Info:$e,Builder:Ee,Form:ge},ke=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={value:t.value,options:{}},t.schema.$options&&(n.state.options=t.schema.$options),!n.state.value&&n.state.options.default&&(n.state.value=n.state.options.default,n.onChange(n.schema,n.state.value)),n.state.items=n.updateItems(),n}H(t,e);var n=t.prototype;return n.updateItems=function(){if(!this.state.options.items)return[];var e=[];for(var t in this.state.options.items){var n=this.state.options.items[t];e.push(r.a.createElement(C.a.Option,{value:t,key:t},n))}return e},n.render=function(){var t=this;return e.prototype.render.call(this,r.a.createElement(C.a,{value:this.state.value,onChange:function(e){return t.changeValue(e)}},this.state.items))},t}(J),Se=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){return r.a.createElement("span",null,r.a.createElement($.a,{color:"#52c41a",style:{color:"white"}},r.a.createElement(R.a,null)))},t}(Q),xe=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.getDerivedStateFromProps=function(e,t){if("string"===typeof t.value&&e.schema.$options&&e.schema.$options.items){var n=e.schema.$options.items;n[t.value]&&(t.value=n[t.value])}return t},t}(Y),Ce=function(e){function t(t){var n;return(n=e.call(this,t)||this).default={minSize:1,maxSize:128},n.configure(),n}return H(t,e),t.prototype.render=function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v.a.Item,{label:"Select min/max size"},r.a.createElement(E.a,null,r.a.createElement(b.a,{min:0,value:this.state.minSize,onChange:function(t){return e.changeIt("minSize",t)}}),r.a.createElement(b.a,{min:0,value:this.state.maxSize,onChange:function(t){return e.changeIt("maxSize",t)}}))))},t}(W),_e={code:p.types.Select.code,description:p.types.Select.description,class:p.types.Select.class,Info:Se,Builder:Ce,Form:ke,Render:xe},Oe={code:"Object",description:"Nested Sub Object",class:function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t}(p.fieldifyType)},we={code:"Array",description:"Array",class:function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.configuration=function(){return{min:{$doc:"Minimum of items",$required:!1,$type:"Number"},max:{$doc:"Maximun of items",$required:!1,$type:"Number"}}},t}(p.fieldifyType)},je=function(e){function t(t){return e.call(this,t)||this}return H(t,e),t.prototype.verify=function(t,n){var a=this;e.prototype.verify.call(this,t,(function(e){if("success"!==e.status)return n(e);if(a.props.user&&t in a.props.user){var r="Field name already used";return a.onError(!0,r),n({status:"error",feedback:!0,help:r})}n(e)}))},t}(te.Form),ze=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t}(te.Info),Ae=function(e){function t(t){var n;return(n=e.call(this,t)||this).default={minSize:1,maxSize:128},n}return H(t,e),t.prototype.render=function(){return r.a.createElement("div",null,r.a.createElement(v.a.Item,{label:"FieldName min/max size"}))},t}(W),Ne={code:p.types.FieldName.code,description:p.types.FieldName.description,class:p.types.FieldName.class,Info:ze,Builder:Ae,Form:je},Ie=function(e){function t(t){return e.call(this,t)||this}H(t,e);var n=t.prototype;return n.cycle=function(t){var n=e.prototype.cycle.call(this,t);return n.value||(n.value={}),this.result=M({},n.value),n.modal=!1,n.modalCurrent={key:"",value:""},n.dataTree=M({},n.value),n.dataSource=this.computeDataSource(n.dataTree),n},n.computeDataSource=function(e){var t=this,n=[],a=function(a){var i=e[a];n.push({key:a,value:i,actions:r.a.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},r.a.createElement("span",{className:"ant-radio-button-wrapper",onClick:function(){return t.removeKey(a)}},r.a.createElement("span",null,r.a.createElement(L.a,null))),r.a.createElement("span",{className:"ant-radio-button-wrapper",onClick:function(){return t.openModal({key:a,value:i})}},r.a.createElement("span",null,r.a.createElement(q.a,null))))})};for(var i in e)a(i);return n},n.handleModalChange=function(e,t){var n=M({},this.state.modalCurrent);n[e]=t,this.setState({modalCurrent:n})},n.openModal=function(e){var t={modalError:!1,modalInitial:null,modalCurrent:e||{key:"",value:""},modal:!0};e&&(t.modalInitial=M({},t.modalCurrent)),this.setState(t)},n.removeKey=function(e){var t=M({},this.state);delete t.dataTree[e],t.dataSource=this.computeDataSource(t.dataTree),this.setState(t),this.changeValue(t.dataTree)},n.editedButton=function(){var e=this,t=M({},this.state),n=this.state.modalCurrent,a=this.schema.$_type,r={};r[n.key]=n.value,a.verify(r,(function(n,a){t.modalError=n,t.modalErrorMessage=a,!1===n&&(t.modalInitial&&delete t.dataTree[t.modalInitial.key],t.dataTree[t.modalCurrent.key]=t.modalCurrent.value,t.dataSource=e.computeDataSource(t.dataTree),t.modal=!1),e.setState(t),e.changeValue(t.dataTree)}))},n.render=function(){var t=this,n=[{title:"Key",dataIndex:"key",key:"key"},{title:"Value",dataIndex:"value",key:"value"},{title:r.a.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},r.a.createElement("span",{className:"ant-radio-button-wrapper",onClick:function(){return t.openModal()}},r.a.createElement("span",null,"Add ",r.a.createElement(D.a,null)))),dataIndex:"actions",key:"actions",align:"right"}],a={labelCol:{span:8},wrapperCol:{span:16}};return e.prototype.render.call(this,r.a.createElement("div",null,r.a.createElement(_.a,{centered:!0,closable:!1,visible:this.state.modal,width:300,onOk:this.editedButton.bind(this),onCancel:function(){t.setState({modal:!1})}},!0===this.state.modalError?r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement(O.a,{size:"small",message:this.state.modalErrorMessage,type:"error"})):null,r.a.createElement(v.a,a,r.a.createElement(v.a.Item,{label:"Key"},r.a.createElement(g.a,{value:this.state.modalCurrent.key,onChange:function(e){var n=e.target;return t.handleModalChange("key",n.value)}})),r.a.createElement(v.a.Item,{label:"Value"},r.a.createElement(g.a,{value:this.state.modalCurrent.value,onChange:function(e){var n=e.target;return t.handleModalChange("value",n.value)}})))),r.a.createElement(w.a,{size:"small",dataSource:this.state.dataSource,columns:n,pagination:{total:this.state.dataSource.length,pageSize:this.state.dataSource.length,hideOnSinglePage:!0}})))},t}(J),Fe=function(e){function t(){return e.apply(this,arguments)||this}return H(t,e),t.prototype.render=function(){return r.a.createElement("span",null,r.a.createElement($.a,{color:"#22075e"},r.a.createElement(B.a,null)))},t}(Q),Ve=function(e){function t(){return e.apply(this,arguments)||this}H(t,e);var n=t.prototype;return n.cycle=function(t){var n=e.prototype.cycle.call(this,t);return n.value||(n.value={}),this.result=M({},n.value),n.dataTree=M({},n.value),n.dataSource=this.computeDataSource(n.dataTree),n},n.computeDataSource=function(e){var t=[];for(var n in e){var a=e[n];t.push({key:n,value:a})}return t},n.render=function(){return e.prototype.subRender.call(this,r.a.createElement("div",null,r.a.createElement(w.a,{showHeader:!1,size:"small",dataSource:this.state.dataSource,columns:[{dataIndex:"key",key:"key"},{dataIndex:"value",key:"value"}],pagination:{total:this.state.dataSource.length,pageSize:this.state.dataSource.length,hideOnSinglePage:!0}})))},t}(Y),Te=function(e){function t(t){var n;return(n=e.call(this,t)||this).default={minSize:1,maxSize:128},n.configure(),n}return H(t,e),t.prototype.render=function(){return r.a.createElement("div",null)},t}(W),Pe={Name:oe,Email:pe,String:te,Number:ve,Select:_e,Checkbox:be,Object:Oe,Array:we,FieldName:Ne,KV:{code:p.types.KV.code,description:p.types.KV.description,class:p.types.KV.class,Info:Fe,Builder:Te,Form:Ie,Render:Ve}},Re=function(e){function t(t,n){return e.call(this,t,n)||this}H(t,e);var n=t.prototype;return n.resolver=function(e){return Pe[e]},n.compile=function(t){e.prototype.compile.call(this,t)},t}(p.schema),Le=function(e){function t(t){var n;return(n=e.call(this,t)||this).formRef=r.a.createRef(),n}H(t,e);var n=t.prototype;return n.cycle=function(e,t){var n={layout:e.layout?e.layout:"horizontal"};return n.rawSchema=e.schema,n.schema=new Re("form"),n.schema.compile(n.rawSchema),n.rawInput=e.input,n.input=new p.input(n.schema),n.input.setValue(e.input),n.inputValue=n.input.getValue(),n.verify=e.verify||!1,n.actions=e.actions,n.generator=e.generator,this.references={},this.onChange=e.onChange?e.onChange:function(){},n.reactive=this.update({state:n,root:n.schema,input:n.inputValue,verify:n.verify}),n},n.getValue=function(){return this.state.input.getValue()},n.clickAddArray=function(e){this.state.input.set(e);var t=this.state.input.getValue();this.onChange(this.state.input,t),this.setState({inputValue:t,reactive:this.update({state:this.state,root:this.state.schema,input:t,verify:!1})})},n.clickRemoveArrayItem=function(e){this.state.input.remove(e);var t=this.state.input.getValue();this.onChange(this.state.input,t),this.setState({inputValue:t,reactive:this.update({state:this.state,root:this.state.schema,input:t,verify:!1})})},n.setValue=function(e,t){if(this.state.input){this.state.input.set(e,t);var n=this.state.input.getValue();this.onChange(this.state.input,n),this.setState({inputValue:n})}},n.update=function(e){var t=this,n=e.root,a=e.input,i=e.verify,s=e.state,o=[];return function e(n,a,o,l,u){return u=u||"",o||(o={}),p.utils.orderedRead(n,(function(n,c){var h=M({},Array.isArray(c)?c[0]:c),p=a[h.$_key],d=M({},Array.isArray(p)?p[0]:p),f=o?o[h.$_key]:null,m=u+"."+h.$_key;if(!0===h.$_array){var y=[{dataIndex:"form",key:"form",width:"100%"}];!0===s.actions&&y.push({dataIndex:"actions",key:"actions",align:"right"});var g=[],$=f,E=h.$array||{},b=E.min?E.min:!0===h.$required?1:0;if(!0===h.$_nested){$=o[h.$_key];if(Array.isArray(f)||($=o[h.$_key]=[]),b-$.length>0)for(var k=0;k<=b-$.length;k++)$.push({});var S=function(){var n=$[k],a=m+"."+k,i=[];e(h,d,n,i,a);var o={key:a,form:i};!0===s.actions&&(o.actions=r.a.createElement(j.a,{size:"small",onClick:function(){return t.clickRemoveArrayItem(a)}},r.a.createElement("span",null,r.a.createElement(L.a,null)))),g.push(o)};for(k=0;k<$.length;k++)S()}else if(h.$type){delete d.$doc;var x=h.$type[s.generator];if(Array.isArray(f)||(o[h.$_key]=[],$=o[h.$_key]),!$)return l;if(b-$.length>0)for(k=0;k<=b-$.length;k++)$.push(null);var C=function(){var e=$[k],n=m+"."+k,a={key:n,form:r.a.createElement(x,{schema:d,value:e,verify:i,user:t.props.user,onChange:function(e,a){return t.setValue(n,a)},isInjected:!0,onError:function(e,a){!0===e?t.references[n]=a:t.references[n]&&delete t.references[n]}})};!0===s.actions&&(a.actions=r.a.createElement(j.a,{size:"small",onClick:function(){return t.clickRemoveArrayItem(n)}},r.a.createElement("span",null,r.a.createElement(L.a,null)))),g.push(a)};for(k=0;k<$.length;k++)C()}l.push(r.a.createElement(v.a.Item,{key:h.$_wire,noStyle:!0},r.a.createElement("div",{className:"ant-form-item"},r.a.createElement(z.a,{size:"small",title:h.$_access.$doc,extra:r.a.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},$&&!0===s.actions?r.a.createElement("span",{className:"ant-radio-button-wrapper",onClick:function(){return t.clickAddArray(m+"."+$.length)}},r.a.createElement("span",null,r.a.createElement(D.a,null))):null)},r.a.createElement(w.a,{size:"small",dataSource:g,columns:y,verticalAlign:"middle",showHeader:!1,pagination:{total:g.length,pageSize:g.length,hideOnSinglePage:!0},bordered:!0})))))}else if(!0===h.$_nested){var _=[];e(h,d,f,_,m),l.push(r.a.createElement("div",{key:h.$_wire,className:"ant-form-item"},r.a.createElement(z.a,{size:"small",title:h.$doc},_)))}else if(c.$type){var O=c.$type[s.generator];l.push(r.a.createElement(O,{schema:d,value:f,key:h.$_wire,verify:i,user:t.props.user,onChange:function(e,n){return t.setValue(m,n)},onError:function(e,n){!0===e?t.references[h.$_wire]=n:t.references[h.$_wire]&&delete t.references[h.$_wire]}}))}})),l}(n.handler.schema,n.handlerSchematized.schema,a,o),o},n.render=function(){var e={};return"horizontal"===this.state.layout&&(e={labelCol:{span:8},wrapperCol:{span:16}}),r.a.createElement(v.a,M({layout:this.state.layout,key:this.formRef},e,{name:"basic"}),this.state.reactive)},t}(y),qe=function(e){function t(){return e.apply(this,arguments)||this}H(t,e);var n=t.prototype;return n.cycle=function(e){return{layout:e.layout,schema:e.schema,input:e.input,onChange:e.onChange}},n.render=function(){return r.a.createElement(Le,{schema:this.state.schema,input:this.state.input,onChange:this.state.onChange,actions:!0,layout:this.state.layout,generator:"Form"})},t}(y),De={},Be={};for(var Ke in Pe)De[Ke]=Pe[Ke].description,"Array"!==Ke&&(Be[Ke]=Pe[Ke].description);var Ue={key:{$doc:"Name of the field",$type:Pe.FieldName,$required:!0,$position:10},type:{$doc:"Field type",$type:"Select",$required:!0,$options:{items:De},$position:11},doc:{$doc:"Description",$required:!1,$type:"String",$position:22},position:{$doc:"Position in the serie",$required:!1,$type:"Number",$default:0,$options:{acceptedTypes:"integer"},$position:23}},Me=function(e){function t(t){var n;return(n=e.call(this,t)||this).formRef=r.a.createRef(),n.state=n.cycle(t,!0),n.currentSchema=Ue,n}H(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=!1,n=M({},this.state);this.props.visible!==e.visible&&(this.currentSchema=Ue,n=this.cycle(this.props),t=!0),!0===t&&this.setState(n)},n.cycle=function(e,t){var n={edition:!1,original:e.value,form:{state:"Filling",color:"blue"},value:{},visible:e.visible,user:e.user,verify:!1};if(n.user&&n.user.$_wire?n.initialPath=n.user.$_wire:n.initialPath="",e.value){var a=e.value;n.edition=!0,!0!==a.$_array&&!0!==a.$_nested?n.value={key:a.$_key,type:a.$type.code,doc:a.$doc,required:a.$required,read:a.$read,write:a.$write,options:a.$options,position:a.$position}:!0===a.$_array&&!0===a.$_nested?n.value={key:a.$_key,type:"Array",content:"Object",doc:a.$doc,required:a.$required,read:a.$read,write:a.$write,options:a.$options,position:a.$position}:!0===a.$_array&&!0!==a.$_nested?n.value={key:a.$_key,type:"Array",content:"string"===typeof a.$type?a.$type:a.$type.code,doc:a.$doc,required:a.$required,read:a.$read,write:a.$write,options:a.$options,position:a.$position}:!0!==a.$_array&&!0===a.$_nested&&(n.value={key:a.$_key,type:"Object",doc:a.$doc,required:a.$required,read:a.$read,write:a.$write,options:a.$options,position:a.$position})}else n.value={};return this.driveSchema(n),n.input.setValue(n.value),n},n.driveSchema=function(e,t){var n=e.value,a=Pe[n.type];if(a&&a!==this.currentType){var r=(new a.class).configuration();this.currentSchema=M({},Ue),"Array"===n.type&&(this.currentSchema.content={$doc:"Item content type",$type:"Select",$required:!0,$options:{default:n.content||"Object",items:Be},$position:12}),r&&(this.currentSchema.options=M({},r,{$doc:"Type configuration"})),e.currentType=a,e.schema=new Re("modal"),e.schema.compile(this.currentSchema),e.input=new p.input(e.schema)}else e.schema=new Re("modal"),e.schema.compile(this.currentSchema),e.input=new p.input(e.schema)},n.formChanged=function(e){var t=this,n={schema:this.state.schema,input:this.state.input,value:M({},this.state.value,e)};this.driveSchema(n),n.input.setValue(n.value),this.setState(n),n.input.verify((function(e){var n={form:{},verify:!0};n.error=e.error,!0===e.error?(n.form.color="blue",n.form.state="Filling"):(n.form.color="green",n.form.state="Passed"),t.setState(n)}))},n.handleOK=function(){var e=this;this.state.input.verify((function(t){var n={form:{},verify:!0};if(n.error=t.error,!0===t.error)n.form.color="red",n.form.state="Error";else{n.form.color="green",n.form.state="Passed",e.setState(n);var a=t.result,r={};for(var i in a)r["$"+i]=a[i];var s=e.state.initialPath.split(".");s.pop(),s.push(a.key);var o=s.join(".");if(delete r.$key,"Array"===r.$type&&"Object"===r.$content){if(!0===e.state.edition){if(e.props.user.$_wire){var l=p.utils.getNO(e.props.user);for(var u in l.nestedObject){var c=l.nestedObject[u];r[c[0]]=c[1]}}}else r.$doc||(r.$doc="");delete r.$type,delete r.$content,r=[r]}else if("Array"===r.$type&&"Object"!==r.$content)r.$type=r.$content,delete r.$content,r=[r];else if("Object"===r.$type){if(!0===e.state.edition){if(e.props.user.$_wire){var h=p.utils.getNO(e.props.user);for(var u in h.nestedObject){var d=h.nestedObject[u];r[d[0]]=d[1]}}}else r.$doc||(r.$doc="");delete r.$type}!0===e.state.edition?e.props.onOk({edition:!0,oldPath:e.state.initialPath,newPath:o,key:a.key,value:r}):e.props.onOk({edition:!1,newPath:e.state.initialPath+"."+a.key,key:a.key,value:r})}}))},n.render=function(){var e=this;return r.a.createElement(_.a,{title:r.a.createElement("span",null,"Add New Field To Your Schema ",r.a.createElement($.a,{color:this.state.form.color},this.state.form.state)),centered:!0,visible:this.state.visible,width:600,onOk:this.handleOK.bind(this),onCancel:function(){e.props.onCancel(e.state)}},r.a.createElement(qe,{ref:this.formRef,schema:this.currentSchema,input:this.state.value,user:this.props.user,verify:this.state.verify,onChange:this.formChanged.bind(this)}))},t}(r.a.Component),He={__proto__:null,FieldifySchemaBuilder:function(e){function t(){return e.apply(this,arguments)||this}H(t,e);var n=t.prototype;return n.cycle=function(e,t){var n=this,a={modal:!1,modalUser:null,schemaDataSource:[]};return this.onChange=function(){},e.onChange&&(this.onChange=e.onChange),a.schema=new Re("form"),a.schema.compile(e.schema),a.schemaDataSource=this.updateDataSource(a.schema),this.columns=[{title:"Key",dataIndex:"name",key:"key"},{title:"Description",dataIndex:"doc",key:"doc"},{title:r.a.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},r.a.createElement("span",{className:"ant-radio-button-wrapper",onClick:function(){return n.handlingAdd()}},r.a.createElement("span",null,"Add ",r.a.createElement(D.a,null)))),dataIndex:"actions",key:"actions",align:"right"}],a},n.fireOnChange=function(){var e=this.state.schema.export();this.onChange(e)},n.itemChanged=function(e){if(!0===e.edition){this.state.schema.getLineup(e.oldPath);this.state.schema.removeLineup(e.oldPath),this.state.schema.setLineup(e.newPath,e.value),A.a.success({message:"Field updated",description:"Field at "+e.oldPath+" has been successfully updated"})}else this.state.schema.setLineup(e.newPath,e.value),A.a.success({message:"Field added",description:"Field at "+e.newPath+" has been successfully added"});this.fireOnChange(),this.setState({modal:!1,modalContent:null,modalUser:null,schemaDataSource:this.updateDataSource(this.state.schema)})},n.itemRemove=function(e){this.state.schema.removeLineup(e.$_wire),this.fireOnChange(),this.setState({schemaDataSource:this.updateDataSource(this.state.schema)}),A.a.success({message:"Field removed",description:"Field at "+e.$_wire+" has been successfully removed"})},n.handlingAdd=function(e){e=e||".";var t={modal:!0,modalContent:null,modalUser:this.state.schema.getLineup(e)||this.state.schema.handler.schema};this.setState(t)},n.handlingEdit=function(e){var t=e.$_wire||".",n={modal:!0,modalContent:e,modalUser:this.state.schema.getLineup(t)||this.state.schema.handler.schema};this.setState(n)},n.updateDataSource=function(e){var t=this;return e?function e(n,a){a||(a="");var i=[];return p.utils.orderedRead(n,(function(n,s){var o=a+"."+s.$_key;if(s.$_path=o,Array.isArray(s)){o=a+"."+s[0].$_key,s[0].$_path=o,s[0].$_array=!0;var l=r.a.createElement(N.a,{title:"... of objects"},r.a.createElement($.a,{color:"#722ed1"},r.a.createElement(K.a,null)));if("$type"in s[0]){var u=s[0].$type.Info;l=r.a.createElement(u,null)}else s[0].$_nested=!0;i.push({ptr:s[0],key:o,name:r.a.createElement("div",null,r.a.createElement(N.a,{title:"This field is an array ..."},r.a.createElement($.a,{color:"#eb2f96"},r.a.createElement(U.a,null))),l,r.a.createElement("strong",null,s[0].$_key)),doc:s[0].$doc,children:"$type"in s[0]?null:e(s[0],o),actions:r.a.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},r.a.createElement(I.a,{title:r.a.createElement("span",null,"Are you sure to delete the Array ",r.a.createElement("strong",null,o)),onConfirm:function(){return t.itemRemove(s[0])},okText:"Yes",cancelText:"No"},r.a.createElement("span",{className:"ant-radio-button-wrapper"},r.a.createElement("span",null,r.a.createElement(L.a,null)))),r.a.createElement("span",{className:"ant-radio-button-wrapper",onClick:function(){return t.handlingEdit(s[0])}},r.a.createElement("span",null,r.a.createElement(q.a,null))),"$type"in s[0]?null:r.a.createElement("span",{className:"ant-radio-button-wrapper",onClick:function(){return t.handlingAdd(o)}},r.a.createElement("span",null,r.a.createElement(D.a,null))))})}else if("object"!==typeof s||s.$type){var c=s.$type.Info;i.push({ptr:s,key:o,name:r.a.createElement("div",null,r.a.createElement(c,null)," ",s.$_key),doc:s.$doc,actions:r.a.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},r.a.createElement(I.a,{title:r.a.createElement("span",null,"Are you sure to delete ",r.a.createElement("strong",null,o)),onConfirm:function(){return t.itemRemove(s)},okText:"Yes",cancelText:"No"},r.a.createElement("span",{className:"ant-radio-button-wrapper"},r.a.createElement("span",null,r.a.createElement(L.a,null)))),r.a.createElement("span",{className:"ant-radio-button-wrapper",onClick:function(){return t.handlingEdit(s)}},r.a.createElement("span",null,r.a.createElement(q.a,null))))})}else s.$_nested=!0,i.push({ptr:s,key:o,name:r.a.createElement("div",null,r.a.createElement(N.a,{title:"This field is an object"},r.a.createElement($.a,{color:"#722ed1"},r.a.createElement(K.a,null))),r.a.createElement("strong",null,s.$_key)),doc:s.$doc,children:e(s,o),actions:r.a.createElement("div",{className:"ant-radio-group ant-radio-group-outline ant-radio-group-small"},r.a.createElement(I.a,{title:r.a.createElement("span",null,"Are you sure to delete Object ",r.a.createElement("strong",null,o)),onConfirm:function(){return t.itemRemove(s)},okText:"Yes",cancelText:"No"},r.a.createElement("span",{className:"ant-radio-button-wrapper"},r.a.createElement("span",null,r.a.createElement(L.a,null)))),r.a.createElement("span",{className:"ant-radio-button-wrapper",onClick:function(){return t.handlingEdit(s)}},r.a.createElement("span",null,r.a.createElement(q.a,null))),r.a.createElement("span",{className:"ant-radio-button-wrapper",onClick:function(){return t.handlingAdd(o)}},r.a.createElement("span",null,r.a.createElement(D.a,null))))})})),i}(e.handler.schema):[]},n.render=function(){var e=this,t=this.state.schemaDataSource;return r.a.createElement("div",null,r.a.createElement(Me,{user:this.state.modalUser,visible:this.state.modal,value:this.state.modalContent,onCancel:function(){return e.setState({modal:!1})},onOk:this.itemChanged.bind(this)}),r.a.createElement(w.a,{columns:this.columns,dataSource:t,size:"small",pagination:{total:t.length,pageSize:t.length,hideOnSinglePage:!0},expandable:{defaultExpandAllRows:!0}}))},t}(y),FieldifySchemaForm:qe,FieldifySchemaRender:function(e){function t(){return e.apply(this,arguments)||this}H(t,e);var n=t.prototype;return n.cycle=function(e){return{layout:e.layout,schema:e.schema,input:e.input}},n.render=function(){return r.a.createElement(Le,{schema:this.state.schema,input:this.state.input,actions:!1,layout:this.state.layout,generator:"Render"})},t}(y),FieldifySchema:Re},Je=(p.input,He),Ye=Pe,Qe=n(148),We=n(114),Ge=n(406),Ze=(n(401),n(402),Je.FieldifySchemaBuilder),Xe=Je.FieldifySchemaForm,et=Je.FieldifySchemaRender,tt=Qe.a.TabPane,nt=function(e){Object(c.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(l.a)(this,n),a=t.call(this,e);var r={company:{$doc:"Your company name",$type:"String",$position:0},name:{$doc:"Civility",$type:"Name",$position:1},email:{$doc:"Votre e-mail",$type:Ye.Email,$position:2},age:{$doc:"Age",$type:Ye.Number,$position:3},KV:{$doc:"Key and Value",$type:Ye.KV,$position:4},types:{$doc:"What kind of number to accept",$required:!0,$type:"Select",$options:{default:"both",items:{both:"Both Integer & Float",integer:"Only Integer",float:"Only Float"}}},address:{$doc:"Address",home:{$doc:"Home",street:{$doc:"Street",$type:Ye.String,$options:{min:2,placeholder:"Your street"}},zip:{$doc:"ZIP",$type:Ye.String},country:{$doc:"Country",$type:Ye.String}}},nestedArray:[{$doc:"Array of Objects (nested)",$array:{min:2}}]};return a.state=a.cycle({schema:r,input:{}},!0),a}return Object(u.a)(n,[{key:"cycle",value:function(e,t){return{schema:e.schema,input:e.input,inputRender:Object(o.a)({},e.input),form:{layout:"horizontal",json:JSON.stringify(e.input,null,"  "),state:"Filling",color:"blue"},builder:{json:JSON.stringify(e.schema,null,"  ")},render:{layout:"horizontal"}}}},{key:"builderChanged",value:function(e){var t={schema:e,builder:{json:JSON.stringify(e,null,"  ")}};this.setState(t)}},{key:"formChanged",value:function(e,t){var n=this;e.verify((function(e){var a={inputRender:Object(o.a)({},e.result),form:{layout:n.state.form.layout,data:e.result,json:JSON.stringify(t,null,"  ")}};!0===e.error?(a.form.color="orange",a.form.state="Verify Failed"):(a.form.color="green",a.form.state="Passed"),n.setState(a)}))}},{key:"render",value:function(){var e=this,t={padding:"8px"};return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("h1",null,"Welcome in @fieldify/antd"),r.a.createElement("h2",null,"Schema Builder"),r.a.createElement(k.a,null,r.a.createElement(S.a,{sm:12,xxl:8},r.a.createElement("div",{style:t},r.a.createElement(z.a,{size:"small",title:"Pass #1 - Building"},r.a.createElement(Qe.a,{defaultActiveKey:"1"},r.a.createElement(tt,{tab:"Visual Editor",key:"1"},r.a.createElement(Ze,{schema:this.state.schema,onChange:this.builderChanged.bind(this)})),r.a.createElement(tt,{tab:"JSON Schema",key:"2"},r.a.createElement("pre",null,this.state.builder.json)))))),r.a.createElement(S.a,{sm:12,xxl:8},r.a.createElement("div",{style:t},r.a.createElement(z.a,{size:"small",title:r.a.createElement(r.a.Fragment,null,"Pass #2 - Filling Form ",r.a.createElement($.a,{color:this.state.form.color},this.state.form.state))},r.a.createElement(Qe.a,{defaultActiveKey:"1"},r.a.createElement(tt,{tab:"Visual Rendering",key:"1"},r.a.createElement(v.a,null,r.a.createElement(v.a.Item,{label:"Form Layout",name:"layout"},r.a.createElement(We.default.Group,{value:this.state.form.layout,onChange:function(t){var n=t.target;return e.setState({form:Object(o.a)(Object(o.a)({},e.state.form),{},{layout:n.value})})}},r.a.createElement(We.default.Button,{value:"horizontal"},"Horizontal"),r.a.createElement(We.default.Button,{value:"vertical"},"Vertical"),r.a.createElement(We.default.Button,{value:"inline"},"Inline")))),r.a.createElement(Ge.a,null),r.a.createElement(Xe,{schema:this.state.schema,input:this.state.input,layout:this.state.form.layout,onChange:this.formChanged.bind(this)})),r.a.createElement(tt,{tab:"Sanatized JSON Input",key:"2"},r.a.createElement("pre",null,this.state.form.json)))))),r.a.createElement(S.a,{sm:12,xxl:8},r.a.createElement("div",{style:t},r.a.createElement(z.a,{size:"small",title:"Pass #3 - Final Result"},r.a.createElement(v.a,null,r.a.createElement(v.a.Item,{label:"Form Layout",name:"layout"},r.a.createElement(We.default.Group,{value:this.state.render.layout,onChange:function(t){var n=t.target;return e.setState({render:{layout:n.value}})}},r.a.createElement(We.default.Button,{value:"horizontal"},"Horizontal"),r.a.createElement(We.default.Button,{value:"vertical"},"Vertical"),r.a.createElement(We.default.Button,{value:"inline"},"Inline")))),r.a.createElement(Ge.a,null),r.a.createElement(et,{schema:this.state.schema,input:this.state.inputRender,layout:this.state.render.layout}))))))}}]),n}(r.a.Component);s.a.render(r.a.createElement(nt,null),document.getElementById("root"))},7:function(e,t,n){var a=n(79),r=n(121),i=n(150),s=n(151),o=n(152),l=n(209),u=n(228),c=n(153),h=n(21);e.exports={schema:l,input:u,types:c,fusion:r,assign:i,iterator:s,compile:o,utils:a,fieldifyType:h}},79:function(e,t,n){(function(t){var a=n(207),r=/^\$/,i={$required:!0,$maxArray:100};e.exports={leaf:r,leafPrivate:/^\$_/,isThereSubObject:function(e){for(var t in e)if(!i.hasOwnProperty(t)&&!r.test(t))return!0;return!1},isThereObjectParams:function(e){for(var t in e)if(!i.hasOwnProperty(t)&&r.test(t))return!0;return!1},eachObject:function(e,n){var a=[];for(var r in e)a.push([r,e[r]]);t.nextTick((function e(){var r=a.shift();void 0!==r?n(r[0],r[1],(function(){t.nextTick(e)}),!1):n(null,null,e,!0)}))},eachItem:function(e,n){var a=0;if(!Array.isArray(e))return n(null,null,null,!0);t.nextTick((function r(){var i=e[a];void 0!==i?n(a,i,(function(){a++,t.nextTick(r)}),!1):n(null,null,null,!0)}))},sync:function(e,n){t.nextTick((function a(r){var i=e[r];i?i((function(){r++,t.nextTick(a,r)})):n&&n()}),0)},getNO:function(e){var t=[],n=[];for(var a in e){var r=e[a];"$"===a.substr(0,1)?n.push([a,r]):t.push([a,r])}return{nestedObject:t,nestedOptions:n}},orderedRead:function(e,t,n){n=n||"";var i=a({},e);for(var s in i)r.test(s)&&delete i[s];for(var o=Object.values(i).sort((function(e,t){return Array.isArray(e)&&(e=e[0]),Array.isArray(t)&&(t=t[0]),e.$position-t.$position})),l=0;l<o.length;l++){var u=o[l];Array.isArray(u)&&(u=u[0]),u.$position=l}for(l=0;l<o.length;l++){t(l,o[l])}}}}).call(this,n(120))}},[[201,1,2]]]);
//# sourceMappingURL=main.37878ae5.chunk.js.map