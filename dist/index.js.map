{"version":3,"file":"index.js","sources":["../src/lib/TypeForm.js","../src/lib/TypeInfo.js","../src/lib/TypeBuilder.js","../src/Types/String.js","../src/Types/Name.js","../src/Types/Email.js","../src/Types/Number.js","../src/Types/Checkbox.js","../src/Types/Select.js","../src/Types/FieldName.js","../src/Types/KV.js","../src/Types.js","../src/Schema/Schema.js","../src/Schema/Form.js","../src/Schema/BuilderModal.js","../src/Schema/Builder.js","../src/Schema.js","../src/index.js"],"sourcesContent":["import React, { Component } from 'react';\nimport {\n  Col,\n  Row,\n  Form\n} from \"antd\";\n\nexport default class FieldifyTypeForm extends Component {\n  constructor(props) {\n    super(props)\n    this.state = this.cycle(props)\n\n    if (props.verify === true) {\n      this.verify(props.value, (ret) => {\n        this.state = { ...this.state, ...ret }\n      })\n    }\n  }\n\n\n  componentDidUpdate(props, state) {\n    if (this.props !== props) {\n      const cycle = this.cycle(this.props);\n      this.setState(cycle)\n    }\n  }\n\n  cycle(props) {\n    this.schema = props.schema;\n\n    const state = {\n      value: props.value,\n      verify: props.verify,\n      feedback: false,\n      status: null,\n      help: this.schema.$help\n    }\n\n    this.isInjected = props.isInjected;\n\n    this.onChange = props.onChange ? props.onChange : () => { };\n    this.onError = props.onError ? props.onError : () => { };\n\n    if (!this.schema) return (state)\n\n    state.options = this.schema.$options || {};\n    this.handler = this.schema.$_type;\n\n    return (state)\n  }\n\n  timedChange(cb, speed) {\n    if (this._changeTimer) {\n      this._changeTimerQueue++;\n      this._changeTimerCb = cb;\n      return;\n    }\n\n    cb = cb || this._changeTimerCb;\n    if (!cb) return;\n\n    delete this._changeTimerCb;\n    this._changeTimerQueue = 0;\n    this._changeTimer = setTimeout(() => {\n      cb(() => {\n        delete this._changeTimer;\n\n        // update in queue ?\n        if (this._changeTimerQueue > 0) {\n          this.timedChange(cb, speed);\n        }\n      })\n    }, speed)\n  }\n\n  changeValue(value, speed) {\n    speed = speed || 100;\n\n    this.setState({\n      value: value\n    })\n\n    this._lastValue = value;\n\n    this.timedChange((end) => {\n      this.verify(this._lastValue, (ret) => {\n        this.setState(ret);\n        if (ret.status !== \"success\") {\n          end();\n          return;\n        }\n        \n        this.onChange(this.schema, this._lastValue);\n        end();\n      })\n    }, speed)\n  }\n\n  verify(value, cb) {\n    this.handler.verify(value, (error, message) => {\n      if (error === false) {\n        this.onError(false);\n        return (cb({\n          status: \"success\",\n          feedback: true,\n          help: null\n        }));\n      }\n\n      \n      this.onError(true, message);\n      return (cb({\n        status: \"error\",\n        feedback: true,\n        help: message\n      }))\n    })\n  }\n\n\n  render(children) {\n    // return(children)\n\n    if (!this.schema || this.isInjected === true) return (\n      <Form.Item\n        label={this.schema.$doc}\n        required={this.schema.$required}\n        validateStatus={this.state.status}\n        hasFeedback={this.state.feedback}\n        help={this.state.help}\n        style={{ marginBottom: \"0px\" }}\n        wrapperCol={{ sm: 24 }}\n      >\n        {children}\n      </Form.Item>\n    )\n\n    return (\n      <Form.Item\n        label={this.schema.$doc}\n        required={this.schema.$required}\n        validateStatus={this.state.status}\n        hasFeedback={this.state.feedback}\n        help={this.state.help}\n        style={{ marginBottom: \"8px\" }}\n        wrapperCol={{ sm: 24 }}\n      >\n        {children}\n      </Form.Item>\n    )\n  }\n}\n\n","import { Component } from 'react';\n\nexport default class SignderivaTypeInfo extends Component {\n  constructor(props) {\n    super(props)\n    this.props = props;\n    if (props.match) this.path = props.match.path;\n    this.state = {}\n  }\n\n\n  componentDidUpdate(prevProps, prevState) {\n    const pNew = this.props.schema || {};\n    const pOld = prevProps.schema || {};\n    // console.log(\"SignderivaTypeInfo.update\", pOld, pNew)\n  }\n\n}\n\n","import { Component } from 'react';\n\nexport default class SignderivaTypeBuilder extends Component {\n  constructor(props) {\n    super(props);\n    this.props = props;\n    this.onChange = props.onChange ? props.onChange : () => { };\n\n    if (props.match) this.path = props.match.path;\n\n    this.state = { ...props.options };\n\n    this.default = {};\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const pNew = this.props.options || {};\n    const pOld = prevProps.options || {};\n    \n    var changed = 0;\n    for (var key in this.default) {\n      const o = pOld[key];\n      const n = pNew[key];\n      if (o !== n)\n        changed++;\n    }\n\n    // console.log(\"TypeBuilder.update\", changed, pOld, pNew)\n    if (changed > 0) {\n      this.setState(pNew);\n      this.onChange({...pNew});\n    }\n    \n  }\n\n  setup(prev) {\n    // console.log(\"setup\")\n    const state = { ...prev };\n\n    // clean non valid field\n    for (var a in state) {\n      const p = this.default[a];\n      if (!p) delete state[a]\n    }\n\n    // setup default\n    for (var a in this.default) {\n      if (!(a in state))\n        state[a] = this.default[a];\n    }\n    return (state);\n  }\n\n  configure() {\n    this.state = this.setup(this.state);\n    this.onChange({ ...this.state });\n  }\n\n  changeIt(key, value) {\n    const change = Object.assign({}, this.state);\n    change[key] = value;\n\n    // console.log(\"TypeBuilder\", change)\n    this.setState(change);\n    this.onChange({...change});\n  }\n\n}\n","\nimport { types } from 'fieldify'\n\nimport React from 'react';\n\nimport {\n  InputNumber,\n  Form,\n  Space,\n  Tag,\n  Input,\n  Col,\n  Row\n} from \"antd\";\n\nimport { FieldStringOutlined as Icon } from '@ant-design/icons';\n\nimport TypeForm from '../lib/TypeForm';\nimport TypeInfo from '../lib/TypeInfo';\nimport TypeBuilder from '../lib/TypeBuilder';\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Rendering of the field in a form\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass StringForm extends TypeForm {\n  render() {\n    return (super.render(\n      <Input \n      value={this.state.value} \n      placeholder={this.state.options.placeholder} \n      onChange={({ target }) => this.changeValue(target.value)} \n      style={{width: \"100%\"}}\n      />\n    ));\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Information of the field show fancy information of the type\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass StringInfo extends TypeInfo {\n  render() {\n    return (\n      <span>\n        <Tag color=\"#fadb14\" style={{ color: \"#555555\" }}><Icon /></Tag>\n      </span>\n    )\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Field builder\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass StringBuilder extends TypeBuilder {\n  constructor(props) {\n    super(props)\n\n    this.default = {\n      minSize: 1,\n      maxSize: 128\n    }\n\n    this.configure()\n  }\n\n  render() {\n    return (\n      <div>\n        <Form.Item label=\"String min/max size\">\n          <Space>\n            <InputNumber min={0} value={this.state.minSize} onChange={(value) => this.changeIt(\"minSize\", value)} />\n\n            <InputNumber min={0} value={this.state.maxSize} onChange={(value) => this.changeIt(\"maxSize\", value)} />\n          </Space>\n        </Form.Item>\n\n      </div>\n    )\n  }\n}\n\nexport default {\n  code: types.String.code,\n  description: types.String.description,\n  class: types.String.class,\n\n  Info: StringInfo,\n  Builder: StringBuilder,\n  Form: StringForm\n}\n\n\n","\nimport { types } from 'fieldify'\n\nimport React from 'react';\n\nimport {\n  InputNumber,\n  Form,\n  Space,\n  Tag,\n  Input,\n  Col,\n  Row\n} from \"antd\";\n\nimport { UserSwitchOutlined as Icon } from '@ant-design/icons';\n\nimport TypeForm from '../lib/TypeForm';\nimport TypeInfo from '../lib/TypeInfo';\nimport TypeBuilder from '../lib/TypeBuilder';\n\nimport TString from './String';\n\nconst StringForm = TString.Form\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Rendering of the field in a form\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass NameForm extends TypeForm {\n  constructor(props) {\n    super(props)\n\n  }\n\n  cycle(props) {\n    const ret = super.cycle(props)\n    if (!ret.value) ret.value = {}\n    \n    this.result = {...ret.value}\n    return (ret)\n  }\n\n  error(from, error, message) {\n    // this.setState({\n    //   help: \"Please fill the form\"\n    // })\n  }\n\n  setField(key, schema, value) {\n    this.result[key] = value;\n    this.onChange(this.schema, this.result);\n  }\n\n  render() {\n\n    return (super.render(\n      <Row gutter={16}>\n        <Col className=\"gutter-row\" span={12}>\n          <StringForm\n            schema={this.schema.first}\n            verify={this.state.verify}\n            value={this.state.value.first}\n            onChange={(schema, value) => this.setField(\"first\", schema, value)}\n            // onError={(error, message) => this.error(\"first\", error, message)}\n            isInjected={true}\n          />\n        </Col>\n        <Col className=\"gutter-row\" span={12}>\n          <StringForm\n            schema={this.schema.last}\n            verify={this.state.verify}\n            value={this.state.value.last}\n            onChange={(schema, value) => this.setField(\"last\", schema, value)}\n            // onError={(error, message) => this.error(\"last\", error, message)}\n            isInjected={true}\n          />\n        </Col>\n      </Row>\n    ))\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Information of the field show fancy information of the type\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass NameInfo extends TypeInfo {\n  render() {\n    return (\n      <span>\n        <Tag color=\"#36cfc9\" style={{ color: \"#555555\" }}><Icon /></Tag>\n      </span>\n    )\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Field builder\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass NameBuilder extends TypeBuilder {\n  constructor(props) {\n    super(props)\n\n    this.default = {\n      minSize: 1,\n      maxSize: 128\n    }\n\n    this.configure()\n  }\n\n  render() {\n    return (\n      <div>\n        <Form.Item label=\"Name min/max size\">\n          <Space>\n            <InputNumber min={0} value={this.state.minSize} onChange={(value) => this.changeIt(\"minSize\", value)} />\n\n            <InputNumber min={0} value={this.state.maxSize} onChange={(value) => this.changeIt(\"maxSize\", value)} />\n          </Space>\n        </Form.Item>\n\n      </div>\n    )\n  }\n}\n\nexport default {\n  code: types.Name.code,\n  description: types.Name.description,\n  class: types.Name.class,\n\n  Info: NameInfo,\n  Builder: NameBuilder,\n  Form: NameForm,\n\n  noFormItem: true\n}\n\n\n","import { types } from 'fieldify'\n\nimport React from 'react';\n\nimport {\n  Checkbox,\n  Form,\n  Tag,\n  Input,\n  Col,\n  Row\n} from \"antd\";\n\nimport { MailOutlined } from '@ant-design/icons';\n\nimport TypeForm from '../lib/TypeForm';\nimport TypeInfo from '../lib/TypeInfo';\nimport TypeBuilder from '../lib/TypeBuilder';\n\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Rendering of the field\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass EmailForm extends TypeForm {\n  render() {\n    return (super.render(\n      <Input value={this.state.value} placeholder={this.state.options.placeholder} onChange={({ target }) => this.changeValue(target.value)} />\n    ));\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Information of the field\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass EmailInfo extends TypeInfo {\n  render() {\n    return (\n      <span>\n        <Tag color=\"#1890ff\"><MailOutlined /></Tag>\n      </span>\n    )\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Complement builder\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass EmailBuilder extends TypeBuilder {\n  constructor(props) {\n    super(props)\n\n    this.default = {\n      subAddressing: true\n    }\n\n    this.configure()\n  }\n\n  render() {\n    return (\n      <div>\n        <Form.Item label=\"Sub-addressing\">\n          <Checkbox checked={this.state.subAddressing} onChange={({ target }) => this.changeIt(\"subAddressing\", target.checked)}>Allowed</Checkbox>\n        </Form.Item>\n      </div>\n    )\n  }\n}\n\n\nexport default {\n  code: types.Email.code,\n  description: types.Email.description,\n  class: types.Email.class,\n\n  Info: EmailInfo,\n  Builder: EmailBuilder,\n  Form: EmailForm\n}","\nimport { types } from 'fieldify'\n\nimport React from 'react';\n\nimport {\n  InputNumber,\n  Form,\n  Space,\n  Tag,\n  Input,\n  Col,\n  Row\n} from \"antd\";\n\nimport { NumberOutlined as Icon } from '@ant-design/icons';\n\nimport TypeForm from '../lib/TypeForm';\nimport TypeInfo from '../lib/TypeInfo';\nimport TypeBuilder from '../lib/TypeBuilder';\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Rendering of the field in a form\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass NumberForm extends TypeForm {\n  render() {\n    return (super.render(\n      <InputNumber \n      value={this.state.value} \n      placeholder={this.state.options.placeholder} \n      onChange={(value) => this.changeValue(value)} \n      style={{width: \"100%\"}}\n      />\n    ));\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Information of the field show fancy information of the type\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass NumberInfo extends TypeInfo {\n  render() {\n    return (\n      <span>\n        <Tag color=\"#ff7a45\"><Icon /></Tag>\n      </span>\n    )\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Field builder\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass NumberBuilder extends TypeBuilder {\n  constructor(props) {\n    super(props)\n\n    this.default = {\n      minSize: 1,\n      maxSize: 128\n    }\n\n    this.configure()\n  }\n\n  render() {\n    return (\n      <div>\n      </div>\n    )\n  }\n}\n\nexport default {\n  code: types.Number.code,\n  description: types.Number.description,\n  class: types.Number.class,\n\n  Info: NumberInfo,\n  Builder: NumberBuilder,\n  Form: NumberForm\n}\n\n\n","\nimport { types } from 'fieldify'\n\nimport React from 'react';\n\nimport {\n  InputNumber,\n  Form,\n  Space,\n  Tag,\n  Input,\n  Col,\n  Row\n} from \"antd\";\n\nimport { FieldStringOutlined as Icon } from '@ant-design/icons';\n\nimport TypeForm from '../lib/TypeForm';\nimport TypeInfo from '../lib/TypeInfo';\nimport TypeBuilder from '../lib/TypeBuilder';\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Rendering of the field in a form\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass CheckboxForm extends TypeForm {\n  render() {\n    return (super.render(\n      <Input placeholder=\"Checkbox of characters\" />\n    ))\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Information of the field show fancy information of the type\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass CheckboxInfo extends TypeInfo {\n  render() {\n    return (\n      <span>\n        <Tag color=\"#fadb14\" style={{ color: \"#555555\" }}><Icon /></Tag>\n      </span>\n    )\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Field builder\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass CheckboxBuilder extends TypeBuilder {\n  constructor(props) {\n    super(props)\n\n    this.default = {\n      minSize: 1,\n      maxSize: 128\n    }\n\n    this.configure()\n  }\n\n  render() {\n    return (\n      <div>\n        <Form.Item label=\"Checkbox min/max size\">\n          <Space>\n            <InputNumber min={0} value={this.state.minSize} onChange={(value) => this.changeIt(\"minSize\", value)} />\n\n            <InputNumber min={0} value={this.state.maxSize} onChange={(value) => this.changeIt(\"maxSize\", value)} />\n          </Space>\n        </Form.Item>\n\n      </div>\n    )\n  }\n}\n\nexport default {\n  code: types.Checkbox.code,\n  description: types.Checkbox.description,\n  class: types.Checkbox.class,\n\n  Info: CheckboxInfo,\n  Builder: CheckboxBuilder,\n  Form: CheckboxForm\n}\n\n\n","\nimport { types } from 'fieldify'\n\nimport React from 'react';\n\nimport {\n  InputNumber,\n  Form,\n  Space,\n  Tag,\n  Input,\n  Select,\n  Col,\n  Row\n} from \"antd\";\n\nimport { SelectOutlined as Icon } from '@ant-design/icons';\n\nimport TypeForm from '../lib/TypeForm';\nimport TypeInfo from '../lib/TypeInfo';\nimport TypeBuilder from '../lib/TypeBuilder';\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Rendering of the field in a form\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass SelectForm extends TypeForm {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      value: props.value,\n      options: {}\n    }\n\n    if (props.schema.$options) this.state.options = props.schema.$options\n\n    if(!this.state.value && this.state.options.default) {\n      this.state.value = this.state.options.default\n      // inform the change\n      this.onChange(this.schema, this.state.value);\n    }\n\n    this.state.items = this.updateItems()\n  }\n\n  updateItems() {\n    if (!this.state.options.items) return ([])\n\n    const options = []\n    for (var key in this.state.options.items) {\n      const value = this.state.options.items[key];\n      options.push(<Select.Option value={key} key={key}>{value}</Select.Option>)\n    }\n\n    return (options)\n  }\n\n  render() {\n    return (super.render(\n      <Select value={this.state.value} onChange={(value)  => this.changeValue(value)}>\n        {this.state.items}\n      </Select>\n    ))\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Information of the field show fancy information of the type\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass SelectInfo extends TypeInfo {\n  render() {\n    return (\n      <span>\n        <Tag color=\"#52c41a\" style={{ color: \"white\" }}><Icon /></Tag>\n      </span>\n    )\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Field builder\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass SelectBuilder extends TypeBuilder {\n  constructor(props) {\n    super(props)\n\n    this.default = {\n      minSize: 1,\n      maxSize: 128\n    }\n\n    this.configure()\n  }\n\n  render() {\n    return (\n      <div>\n        <Form.Item label=\"Select min/max size\">\n          <Space>\n            <InputNumber min={0} value={this.state.minSize} onChange={(value) => this.changeIt(\"minSize\", value)} />\n\n            <InputNumber min={0} value={this.state.maxSize} onChange={(value) => this.changeIt(\"maxSize\", value)} />\n          </Space>\n        </Form.Item>\n\n      </div>\n    )\n  }\n}\n\nexport default {\n  code: types.Select.code,\n  description: types.Select.description,\n  class: types.Select.class,\n\n  Info: SelectInfo,\n  Builder: SelectBuilder,\n  Form: SelectForm\n}\n\n\n","\nimport { types } from 'fieldify'\n\nimport React from 'react';\n\nimport {\n  InputNumber,\n  Form,\n  Space,\n  Tag,\n  Input,\n  Col,\n  Row\n} from \"antd\";\n\nimport { FieldStringOutlined as Icon } from '@ant-design/icons';\n\nimport TypeForm from '../lib/TypeForm';\nimport TypeInfo from '../lib/TypeInfo';\nimport TypeBuilder from '../lib/TypeBuilder';\n\nimport String from './String'\n\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Rendering of the field in a form\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass FieldNameForm extends String.Form { \n  constructor(props){\n    super(props)\n  }\n\n  verify(input, cb) {\n    super.verify(input, (ret)=>{\n      if(ret.status !== \"success\") {\n        return(cb(ret))\n      }\n\n      // check if the key is already used\n      if(this.props.user && input in this.props.user) {\n        const msg = `Field name already used`\n        \n        this.onError(true, msg);\n        return (cb({\n          status: \"error\",\n          feedback: true,\n          help: msg\n        }))\n      }\n\n      cb(ret)\n    })\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Information of the field show fancy information of the type\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass FieldNameInfo extends String.Info { }\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Field builder\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass FieldNameBuilder extends TypeBuilder {\n  constructor(props) {\n    super(props)\n\n    this.default = {\n      minSize: 1,\n      maxSize: 128\n    }\n\n    // this.configure()\n  }\n\n  render() {\n    return (\n      <div>\n        <Form.Item label=\"FieldName min/max size\">\n          {/* <Space>\n            <InputNumber min={0} value={this.state.minSize} onChange={(value) => this.changeIt(\"minSize\", value)} />\n\n            <InputNumber min={0} value={this.state.maxSize} onChange={(value) => this.changeIt(\"maxSize\", value)} />\n          </Space> */}\n        </Form.Item>\n\n      </div>\n    )\n  }\n}\n\nexport default {\n  code: types.FieldName.code,\n  description: types.FieldName.description,\n  class: types.FieldName.class,\n\n  Info: FieldNameInfo,\n  Builder: FieldNameBuilder,\n  Form: FieldNameForm\n}\n\n\n","\nimport { types, input as FieldifyInput } from 'fieldify'\n\nimport React from 'react';\n\nimport {\n  Table,\n  Form,\n  Input,\n  Tag,\n  Modal,\n  Alert,\n  Row\n} from \"antd\";\n\nimport {\n  SmallDashOutlined as Icon,\n  EditOutlined as EditIcon,\n  DeleteOutlined as DeleteIcon,\n  UnorderedListOutlined as ObjectIcon,\n  PlusOutlined as PlusIcon,\n  CopyOutlined as ArrayIcon\n} from '@ant-design/icons';\n\nimport TypeForm from '../lib/TypeForm';\nimport TypeInfo from '../lib/TypeInfo';\nimport TypeBuilder from '../lib/TypeBuilder';\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Rendering of the field in a form\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass KVForm extends TypeForm {\n\n  constructor(props) {\n    super(props)\n  }\n\n  cycle(props) {\n    const ret = super.cycle(props)\n\n    if (!ret.value) ret.value = {}\n\n    this.result = { ...ret.value }\n\n    ret.modal = false\n    ret.modalCurrent = {\n      key: \"\",\n      value: \"\"\n    }\n    ret.dataTree = { ...ret.value }\n    ret.dataSource = this.computeDataSource(ret.dataTree);\n\n    return (ret)\n  }\n\n  computeDataSource(tree) {\n    const ds = []\n    for (let key in tree) {\n      const value = tree[key]\n      ds.push({\n        key: key,\n        value: value,\n        actions: <div className=\"ant-radio-group ant-radio-group-outline ant-radio-group-small\">\n          <span className=\"ant-radio-button-wrapper\" onClick={() => this.removeKey(key)}>\n            <span><DeleteIcon /></span>\n          </span>\n          <span className=\"ant-radio-button-wrapper\" onClick={() => this.openModal({ key, value })}>\n            <span><EditIcon /></span>\n          </span>\n        </div>\n      })\n    }\n    return (ds)\n  }\n\n  handleModalChange(key, value) {\n    const modalCurrent = { ...this.state.modalCurrent }\n    modalCurrent[key] = value;\n    this.setState({ modalCurrent })\n  }\n\n  openModal(data) {\n    const state = {\n      modalError: false,\n      modalInitial: null,\n      modalCurrent: data || {\n        key: \"\",\n        value: \"\"\n      },\n      modal: true\n    }\n\n    if (data) state.modalInitial = { ...state.modalCurrent }\n\n    this.setState(state)\n  }\n\n  removeKey(key) {\n    const state = { ...this.state }\n    delete state.dataTree[key]\n    state.dataSource = this.computeDataSource(state.dataTree);\n    this.setState(state)\n\n    this.changeValue(state.dataTree)\n  }\n\n  editedButton() {\n    const state = { ...this.state }\n\n    const mc = this.state.modalCurrent;\n\n    // check the key input\n    const type = this.schema.$_type;\n\n    // verify the input\n    const data = {}\n    data[mc.key] = mc.value;\n    type.verify(data, (error, message) => {\n      state.modalError = error;\n      state.modalErrorMessage = message;\n\n      if (error === false) {\n        // remove old entry and add new one\n        if (state.modalInitial) {\n          delete state.dataTree[state.modalInitial.key];\n        }\n        state.dataTree[state.modalCurrent.key] = state.modalCurrent.value\n\n        state.dataSource = this.computeDataSource(state.dataTree);\n\n        state.modal = false;\n      }\n\n      this.setState(state)\n      this.changeValue(state.dataTree)\n    })\n\n  }\n\n  render() {\n    const onCancel = () => {\n      this.setState({ modal: false });\n    };\n\n    const columns = [\n      {\n        title: 'Key',\n        dataIndex: 'key',\n        key: 'key',\n      },\n      {\n        title: 'Value',\n        dataIndex: 'value',\n        key: 'value',\n      },\n      {\n        title: <div className=\"ant-radio-group ant-radio-group-outline ant-radio-group-small\">\n          <span className=\"ant-radio-button-wrapper\" onClick={() => this.openModal()}>\n            <span>Add <PlusIcon /></span>\n          </span>\n        </div>,\n        dataIndex: 'actions',\n        key: 'actions',\n        align: \"right\"\n      },\n    ];\n\n    const layout = {\n      labelCol: { span: 8 },\n      wrapperCol: { span: 16 },\n    };\n\n    return (super.render(<div>\n      <Modal\n        centered\n        closable={false}\n        visible={this.state.modal}\n        width={300}\n        onOk={this.editedButton.bind(this)}\n        onCancel={onCancel}\n      >\n        {this.state.modalError === true ?\n          <div style={{ marginBottom: 8 }}>\n            <Alert size=\"small\" message={this.state.modalErrorMessage} type=\"error\" />\n          </div>\n\n          : null}\n\n        <Form\n          {...layout}\n        >\n          <Form.Item label=\"Key\">\n            <Input value={this.state.modalCurrent.key} onChange={({ target }) => this.handleModalChange(\"key\", target.value)} />\n          </Form.Item>\n\n          <Form.Item label=\"Value\">\n            <Input value={this.state.modalCurrent.value} onChange={({ target }) => this.handleModalChange(\"value\", target.value)} />\n          </Form.Item>\n\n        </Form>\n\n\n      </Modal>\n      <Table\n        size=\"small\"\n        dataSource={this.state.dataSource}\n        columns={columns}\n        pagination={{\n          total: this.state.dataSource.length,\n          pageSize: this.state.dataSource.length,\n          hideOnSinglePage: true\n        }}\n      />\n    </div>));\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Information of the field show fancy information of the type\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass KVInfo extends TypeInfo {\n  render() {\n    return (\n      <span>\n        <Tag color=\"#22075e\"><Icon /></Tag>\n      </span>\n    )\n  }\n}\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n *\n *\n * Field builder\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\nclass KVBuilder extends TypeBuilder {\n  constructor(props) {\n    super(props)\n\n    this.default = {\n      minSize: 1,\n      maxSize: 128\n    }\n\n    this.configure()\n  }\n\n  render() {\n    return (\n      <div>\n      </div>\n    )\n  }\n}\n\nexport default {\n  code: types.KV.code,\n  description: types.KV.description,\n  class: types.KV.class,\n\n  Info: KVInfo,\n  Builder: KVBuilder,\n  Form: KVForm\n}\n\n\n","import Name from \"./Types/Name\"\nimport Email from \"./Types/Email\"\nimport String from \"./Types/String\"\nimport Number from \"./Types/Number\"\nimport Checkbox from \"./Types/Checkbox\"\nimport Select from \"./Types/Select\"\nimport FieldName from \"./Types/FieldName\"\nimport KV from \"./Types/KV\"\n\nexport default {\n  Name,\n  Email,\n  String,\n  Number,\n  Select,\n  Checkbox,\n  FieldName,\n  KV\n}\n","import { schema } from \"fieldify\";\nimport Types from \"../Types\"\n\nexport class FieldifySchema extends schema {\n  constructor(name, options) {\n    super(name, options);\n  }\n\n  resolver(type) {\n    return (Types[type])\n  }\n\n  compile(schema) {\n    // process normal compilation\n    super.compile(schema);\n  }\n}\n","import { utils, input as FieldifyInput } from \"fieldify\";\nimport React from 'react';\nimport { Form, Table, Button, Input, Card } from \"antd\";\nimport {\n  PlusOutlined as PlusIcon,\n  DeleteOutlined as DeleteIcon\n} from '@ant-design/icons';\n\nexport class FieldifySchemaForm extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.formRef = React.createRef()\n    this.state = this.cycle(props, true);\n  }\n\n  componentDidUpdate(props, state) {\n    if(props.schema !== this.schema || props.input !== this.input) {\n      const cycle = this.cycle(this.props);\n      this.setState(cycle)\n    }\n  }\n\n  cycle(props, first) {\n    const state = {}\n\n    this.schema = props.schema;\n    this.input = props.input;\n\n    if (!this.input || !(typeof props.input === \"object\")) {\n      this.input = new FieldifyInput(this.schema)\n    }\n\n    state.input = this.input.getValue()\n    state.verify = props.verify||false\n\n    state.reactive = this.update(state.input, state.verify);\n\n    this.references = {};\n\n    this.onChange = props.onChange ? props.onChange : () => { };\n\n    return (state)\n  }\n\n  clickAddArray(line) {\n    this.input.set(line)\n    const _value = this.input.getValue();\n    this.onChange(_value)\n    this.setState({\n      input: _value,\n      reactive: this.update(_value, false)\n    })\n  }\n\n  clickRemoveArrayItem(line) {\n    this.input.remove(line)\n    const _value = this.input.getValue();\n    this.onChange(_value)\n    this.setState({\n      input: _value,\n      reactive: this.update(_value, false)\n    })\n  }\n\n  setValue(line, value) {\n    this.input.set(line, value)\n    const _value = this.input.getValue();\n    this.onChange(_value)\n    this.setState({\n      input: _value\n    })\n  }\n\n  input(input, verify) {\n    // const state = {\n    //   verify,\n    //   input\n    // }    \n    // state.reactive = this.update(input, verify)\n    // this.setState(state)\n  }\n\n  update(input, verify) {\n    const follower = (schema, input, ret, line) => {\n      line = line || \"\"\n\n      utils.orderedRead(schema, (index, item) => {\n        const inputPtr = input ? input[item.$_key] : null;\n        const lineKey = line + \".\" + item.$_key;\n\n        // check if the item is hidden\n        if (item.hidden === true)\n          return;\n\n        // ARRAY\n        if (Array.isArray(item)) {\n          const source = { ...item[0] };\n          var inputPtr2 = inputPtr;\n          const options = source.$array || {};\n          const min = options.min ? options.min : (source.$required === true ? 1 : 0)\n\n          const columns = [\n            {\n              dataIndex: 'form',\n              key: 'form',\n              width: \"100%\"\n            },\n            {\n              dataIndex: 'actions',\n              key: 'actions',\n              align: \"right\"\n            },\n          ];\n          const dataSource = []\n\n          /*\n           * Is an array with non nested schema inside\n           */\n          if (source.$_array === true && source.$_nested !== true) {\n\n            delete source.$doc; // source is cloned\n            const TypeForm = source.$type.Form;\n\n            // console.log(\"Array non nested\", min, inputPtr2)\n\n            if (verify === true) {\n              // console.log()\n            }\n\n            if (!Array.isArray(inputPtr)) {\n              input[item.$_key] = [];\n              inputPtr2 = input[item.$_key];\n            }\n\n            if (!inputPtr2) return (ret);\n\n            if (min - inputPtr2.length > 0) {\n              for (var a = 0; a <= min - inputPtr2.length; a++) {\n                inputPtr2.push(null)\n              }\n            }\n\n            for (var a = 0; a < inputPtr2.length; a++) {\n              const value = inputPtr2[a];\n              const key = lineKey + \".\" + a\n\n              dataSource.push({\n                key,\n                form: <TypeForm\n                  schema={source}\n                  value={value}\n                  verify={verify}\n                  user={this.props.user}\n                  onChange={(schema, value) => this.setValue(key, value)}\n                  isInjected={true}\n                  // reference errors\n                  onError={(error, message) => {\n                    if (error === true) {\n                      this.references[key] = message;\n                    }\n                    else {\n                      const ref = this.references[key];\n                      if (ref) {\n                        delete this.references[key];\n                      }\n                    }\n                  }}\n                />,\n                actions: <Button size=\"small\" onClick={() => this.clickRemoveArrayItem(key)}>\n                  <span><DeleteIcon /></span>\n                </Button>\n              })\n            }\n\n          }\n          /*\n           * Is an array with nested schema inside\n           */\n          else if (source.$_array === true && source.$_nested === true) {\n            var inputPtr2 = input[item.$_key]\n\n            // console.log(\"Schema has nested array\", item.$_wire, item.$_key, verify, source, input[item.$_key], input)\n\n            if (!Array.isArray(inputPtr)) inputPtr2 = input[item.$_key] = [];\n\n            // console.log(\"Array nested\", min, min - inputPtr2.length, inputPtr2)\n\n            // force to create min form\n            if (min - inputPtr2.length > 0) {\n              for (var a = 0; a <= min - inputPtr2.length; a++) {\n                inputPtr2.push({})\n              }\n            }\n\n            // very special case for field where there is subfield\n            if (item[0].$_schematized === true) {\n              delete source.$doc; // source is cloned\n              const TypeForm = source.$type.Form;\n\n              for (var a = 0; a < inputPtr2.length; a++) {\n                const value = inputPtr2[a];\n                const key = lineKey + \".\" + a\n\n                dataSource.push({\n                  key,\n                  form: <TypeForm\n                    schema={source}\n                    value={value}\n                    verify={verify}\n                    user={this.props.user}\n                    onChange={(schema, value) => this.setValue(key, value)}\n                    isInjected={true}\n                    // reference errors\n                    onError={(error, message) => {\n                      if (error === true) {\n                        this.references[key] = message;\n                      }\n                      else {\n                        const ref = this.references[key];\n                        if (ref) {\n                          delete this.references[key];\n                        }\n                      }\n                    }}\n                  />,\n                  actions: <Button size=\"small\" onClick={() => this.clickRemoveArrayItem(key)}>\n                    <span><DeleteIcon /></span>\n                  </Button>\n                })\n              }\n            }\n            else {\n              for (var a = 0; a < inputPtr2.length; a++) {\n                const value = inputPtr2[a];\n                const key = lineKey + \".\" + a\n\n                const child = [];\n                follower(item.$_ptr[0], value, child, key);\n\n                dataSource.push({\n                  key,\n                  form: child,\n                  actions: <Button size=\"small\" onClick={() => this.clickRemoveArrayItem(key)}>\n                    <span><DeleteIcon /></span>\n                  </Button>\n                })\n              }\n            }\n\n          }\n\n          ret.push(<Form.Item key={item.$_wire} noStyle={true}>\n            <div className=\"ant-form-item\">\n              <Card size=\"small\" title={source.$_access.$doc} extra={<div className=\"ant-radio-group ant-radio-group-outline ant-radio-group-small\">\n                <span className=\"ant-radio-button-wrapper\" onClick={() => this.clickAddArray(lineKey + \".\" + inputPtr2.length)}>\n                  <span><PlusIcon /></span>\n                </span>\n              </div>}>\n                <Table\n                  size=\"small\"\n                  dataSource={dataSource}\n                  columns={columns}\n                  verticalAlign='middle'\n                  showHeader={false}\n                  pagination={{\n                    total: dataSource.length,\n                    pageSize: dataSource.length,\n                    hideOnSinglePage: true\n                  }}\n                  bordered\n                />\n              </Card>\n            </div>\n          </Form.Item>);\n        }\n        // OBJECT\n        else if (typeof item === \"object\" && !item.$type) {\n          const child = [];\n          follower(item.$_ptr, inputPtr, child, lineKey);\n          ret.push(<div key={item.$_wire} className=\"ant-form-item\">\n            <Card size=\"small\" title={item.$doc}>\n              {child}\n            </Card>\n          </div>);\n        }\n        // LEAF\n        else {\n          const TypeForm = item.$type.Form;\n\n          ret.push(<TypeForm\n            schema={item}\n            value={inputPtr}\n            key={item.$_wire}\n            verify={verify}\n            user={this.props.user}\n            onChange={(schema, value) => this.setValue(lineKey, value)}\n\n            // reference errors\n            onError={(error, message) => {\n              if (error === true) {\n                this.references[item.$_key] = message;\n              }\n              else {\n                const ref = this.references[item.$_key];\n                if (ref) {\n                  delete this.references[item.$_key];\n                }\n              }\n            }}\n          />);\n        }\n      });\n      return (ret);\n    };\n\n\n    const ret = [];\n    follower(this.schema.handler.schema, input, ret);\n    return (ret);\n  }\n\n  render() {\n\n    const layout = {\n      labelCol: { span: 8 },\n      wrapperCol: { span: 16 },\n    };\n\n    return (<Form\n      key={this.formRef}\n      {...layout}\n      name=\"basic\" >\n      {this.state.reactive}\n    </Form>);\n  }\n}\n","import { input as FieldifyInput } from \"fieldify\";\n\nimport React from 'react';\nimport Types from '../Types';\nimport { Modal, Form, Input, Select, Checkbox, Tag } from \"antd\";\nimport { FieldifySchema } from \"../Schema/Schema\";\nimport { FieldifySchemaForm } from './Form'\n\n// build all available types\nconst allTypes = {}\nfor (var a in Types) {\n  allTypes[a] = Types[a].description\n}\n\n// set the very basic schema for the modal\nconst baseSchema = {\n  key: {\n    $doc: \"Name of the field\",\n    $type: Types.FieldName,\n    $required: true\n  },\n  type: {\n    $doc: \"Field type\",\n    $type: Types.Select,\n    $required: true,\n    $options: {\n      items: allTypes\n    }\n  },\n  doc: {\n    $doc: \"Description\",\n    $required: true,\n    $type: Types.String\n  },\n  // options: {\n  //   $doc: \"Options\",\n  //   $type: Types.Checkbox,\n  //   $options: {\n  //     required: \"Field is required\",\n  //     readOnly: \"Field is read only\",\n  //   }\n  // },\n}\n\nexport class FieldifySchemaBuilderModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.formRef = React.createRef()\n    this.state = this.cycle(props, true)\n    this.currentSchema = baseSchema\n  }\n\n  componentDidUpdate(props) {\n    var changed = false\n    var state = { ...this.state }\n\n    if (this.props.visible !== props.visible) {\n      this.currentSchema = baseSchema\n      state = this.cycle(this.props)\n      changed = true;\n    }\n\n    if (changed === true) this.setState(state)\n  }\n\n  cycle(props, first) {\n\n    const state = {\n      form: {\n        state: \"Filling\",\n        color: \"blue\"\n      },\n      value: {},\n      visible: props.visible,\n      user: props.user\n    };\n\n    if (props.value) {\n      state.value = {\n        key: props.value.$_key,\n        type: props.value.$type.code,\n        doc: props.value.$doc,\n        options: props.value.$options,\n      }\n    }\n    else {\n      state.value = {}\n    }\n\n    // const Type = Types[state.value.type]\n    // if (Type) {\n    //   // create a fake tmp type\n    //   const TypeObject = new Type.class\n\n    //   const configuration = TypeObject.configuration()\n\n    //   this.currentSchema = { ...baseSchema }\n    //   if (configuration) this.currentSchema.options = {\n    //     ...configuration,\n    //     $doc: \"Type configuration\"\n    //   };\n\n    //   // const upSchema = Type.\n    //   this.currentType = Type;\n    // }\n\n    // state.schema = new FieldifySchema(\"modal\");\n    // state.schema.compile(this.currentSchema);\n    // state.input= new FieldifyInput(state.schema)\n\n    // if (props.value) this.input.setValue(state.value)\n    this.driveSchema(state)\n\n    state.input.setValue(state.value)\n\n    return (state)\n  }\n\n  driveSchema(state) {\n    const value = state.value;\n\n    const Type = Types[value.type]\n    if (Type && Type !== this.currentType) {\n\n      // create a fake tmp type\n      const TypeObject = new Type.class\n\n      const configuration = TypeObject.configuration()\n\n      this.currentSchema = { ...baseSchema }\n      if (configuration) this.currentSchema.options = {\n        ...configuration,\n        $doc: \"Type configuration\"\n      };\n\n      // const upSchema = Type.\n      this.currentType = Type;\n\n      state.schema = new FieldifySchema(\"modal\");\n      state.schema.compile(this.currentSchema);\n      state.input = new FieldifyInput(state.schema)\n\n    }\n    else if(!state.schema) {\n      state.schema = new FieldifySchema(\"modal\");\n      state.schema.compile(this.currentSchema);\n      state.input = new FieldifyInput(state.schema)\n    }\n\n\n  }\n\n\n  formChanged(value) {\n\n    const state = {\n      schema: this.state.schema,\n      input: this.state.input,\n      value: { ...this.state.value, ...value }\n    }\n    console.log(\"state\", state)\n    this.driveSchema(state)\n    state.input.setValue(state.value)\n    this.setState(state)\n\n    state.input.verify((result) => {\n      const state = { form: {} }\n\n      state.error = result.error\n\n      if (result.error === true) {\n        state.form.color = \"blue\"\n        state.form.state = \"Filling\"\n      }\n      else {\n        state.form.color = \"green\"\n        state.form.state = \"Passed\"\n      }\n\n      this.setState(state)\n    })\n    console.log(\"formChanged\", value, state)\n\n  }\n\n  render() {\n    const onOk = () => {\n      // this.onOk(this.state);\n    };\n    const onCancel = () => {\n      // this.setState({ visible: false });\n      this.props.onCancel(this.state);\n    };\n    const layout = {\n      labelCol: { span: 8 },\n      wrapperCol: { span: 16 },\n    };\n\n    return (<Modal\n      title={<span>Add New Field To Your Schema <Tag color={this.state.form.color}>{this.state.form.state}</Tag></span>}\n      centered\n      visible={this.state.visible}\n      width={600}\n      onOk={onOk}\n      onCancel={onCancel}\n    >\n\n      <FieldifySchemaForm\n        ref={this.formRef}\n        schema={this.state.schema}\n        input={this.state.input}\n        user={this.props.user}\n        onChange={this.formChanged.bind(this)}\n      />\n\n    </Modal>);\n  }\n}\n","import React from 'react';\nimport {\n  schema,\n  iterator,\n  assign,\n  fusion,\n  utils\n} from \"fieldify\"\n\nimport {\n  notification,\n  Table,\n  Tag,\n  Popconfirm,\n  Tooltip\n} from 'antd';\n\nimport {\n  EditOutlined as EditIcon,\n  DeleteOutlined as DeleteIcon,\n  UnorderedListOutlined as ObjectIcon,\n  PlusOutlined as PlusIcon,\n  CopyOutlined as ArrayIcon\n} from '@ant-design/icons';\n\nimport { FieldifySchemaBuilderModal } from './BuilderModal';\n\nimport String from \"../Types/String\";\n\nexport class FieldifySchemaBuilder extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      modal: false,\n      modalUser: null,\n      schemaDataSource: []\n    };\n\n    this.schema = props.schema;\n\n    this.state.schemaDataSource = this.updateDataSource()\n\n    this.columns = [\n      {\n        title: 'Key',\n        dataIndex: 'name',\n        key: 'key',\n      },\n      {\n        title: 'Description',\n        dataIndex: 'doc',\n        key: 'doc'\n      },\n      {\n        title: <div className=\"ant-radio-group ant-radio-group-outline ant-radio-group-small\">\n          <span className=\"ant-radio-button-wrapper\" onClick={() => this.handlingAdd()}>\n            <span>Add Field <PlusIcon /></span>\n          </span>\n        </div>,\n        dataIndex: 'actions',\n        key: 'actions',\n        align: \"right\"\n      },\n    ];\n\n  }\n\n  fireOnChange() {\n\n  }\n\n  itemChanged(arg) {\n    console.log(\"itemChanged\", arg);\n  }\n\n  itemRemove(item) {\n    this.props.schema.removeLineup(item.$_path);\n\n    this.fireOnChange();\n\n    this.setState({\n      schemaDataSource: this.updateDataSource()\n    });\n\n    notification.success({\n      message: \"Field removed\",\n      description: `Field at ${item.$_path} has been removed successfully`\n    })\n  }\n\n  handlingAdd(path) {\n    path = path || \".\";\n    const lineup = this.props.schema.getLineup(path) || this.schema.handler.schema;\n    console.log(\"handing add\", path, lineup);\n    this.setState({ modal: true, modalContent: null, modalUser: lineup });\n  }\n\n  handlingEdit(item) {\n    console.log(\"handing edit\", item, Array.isArray(item));\n    this.setState({ modal: true, modalContent: item });\n  }\n\n  updateDataSource() {\n    const self = this;\n    function fieldify2antDataTable(schema, wire) {\n      if (!wire)\n        wire = \"\";\n      const current = [];\n      utils.orderedRead(schema, (index, item) => {\n        const path = wire + \".\" + item.$_key;\n        item.$_path = path;\n\n        // Is array\n        if (Array.isArray(item)) {\n          var composite = <Tooltip title=\"... of objects\">\n            <Tag color=\"#722ed1\"><ObjectIcon /></Tag>\n          </Tooltip>;\n          // for direct type assignation\n          if (\"$type\" in item[0]) {\n            const TypeInfo = item[0].$type.Info;\n            composite = <TypeInfo />;\n          }\n          current.push({\n            ptr: item,\n            key: path,\n            name: <div>\n              <Tooltip title=\"This field is an array ...\">\n                <Tag color=\"#eb2f96\"><ArrayIcon /></Tag>\n              </Tooltip>\n              {composite}\n              <strong>{item.$_key}</strong>\n            </div>,\n            doc: item.$doc,\n            children: !(\"$type\" in item[0]) ? fieldify2antDataTable(item[0], path) : null,\n            actions: <div className=\"ant-radio-group ant-radio-group-outline ant-radio-group-small\">\n              <Popconfirm title={<span>Are you sure to delete the Array <strong>{path}</strong></span>} onConfirm={() => self.itemRemove(item)} okText=\"Yes\" cancelText=\"No\">\n                <span className=\"ant-radio-button-wrapper\">\n                  <span><DeleteIcon /></span>\n                </span>\n              </Popconfirm>\n\n              <span className=\"ant-radio-button-wrapper\" onClick={() => self.handlingEdit(item)}>\n                <span><EditIcon /></span>\n              </span>\n\n              {!(\"$type\" in item[0]) ?\n                <span className=\"ant-radio-button-wrapper\" onClick={() => self.handlingAdd(path)}>\n                  <span><PlusIcon /></span>\n                </span>\n                : null}\n            </div>\n          });\n        }\n        // is object\n        else if (typeof item === \"object\" && !item.$type) {\n          current.push({\n            ptr: item,\n            key: path,\n            name: <div>\n              <Tooltip title=\"This field is an object\">\n                <Tag color=\"#722ed1\"><ObjectIcon /></Tag>\n              </Tooltip>\n              <strong>{item.$_key}</strong>\n            </div>,\n            doc: item.$doc,\n            children: fieldify2antDataTable(item, path),\n            actions: <div className=\"ant-radio-group ant-radio-group-outline ant-radio-group-small\">\n              <Popconfirm title={<span>Are you sure to delete Object <strong>{path}</strong></span>} onConfirm={() => self.itemRemove(item)} okText=\"Yes\" cancelText=\"No\">\n                <span className=\"ant-radio-button-wrapper\">\n                  <span><DeleteIcon /></span>\n                </span>\n              </Popconfirm>\n\n              <span className=\"ant-radio-button-wrapper\" onClick={() => self.handlingEdit(item)}>\n                <span><EditIcon /></span>\n              </span>\n\n              <span className=\"ant-radio-button-wrapper\" onClick={() => self.handlingAdd(path)}>\n                <span><PlusIcon /></span>\n              </span>\n            </div>\n          });\n        }\n        else if (item.$type) {\n          const TypeInfo = item.$type.Info;\n          current.push({\n            ptr: item,\n            key: path,\n            name: <div>\n              <TypeInfo /> {item.$_key}\n            </div>,\n            doc: item.$doc,\n            actions: <div className=\"ant-radio-group ant-radio-group-outline ant-radio-group-small\">\n              <Popconfirm title={<span>Are you sure to delete <strong>{path}</strong></span>} onConfirm={() => self.itemRemove(item)}\n                // onCancel={cancel}\n                okText=\"Yes\" cancelText=\"No\">\n                <span className=\"ant-radio-button-wrapper\">\n                  <span><DeleteIcon /></span>\n                </span>\n              </Popconfirm>\n\n              <span className=\"ant-radio-button-wrapper\" onClick={() => self.handlingEdit(item)}>\n                <span><EditIcon /></span>\n              </span>\n            </div>\n          });\n        }\n      });\n      return (current);\n    }\n\n    var data = null;\n    if (this.schema) {\n      data = fieldify2antDataTable(this.schema.handler.schema);\n      return (data)\n    }\n\n    return ([])\n  }\n\n  render() {\n    const sds = this.state.schemaDataSource;\n\n    return (<div>\n      <FieldifySchemaBuilderModal\n        user={this.state.modalUser}\n        visible={this.state.modal}\n        value={this.state.modalContent}\n        onCancel={() => this.setState({ modal: false })}\n        onOk={this.itemChanged.bind(this)}\n      />\n\n      <Table columns={this.columns} dataSource={sds} size=\"small\" pagination={{\n        total: sds.length,\n        pageSize: sds.length,\n        hideOnSinglePage: true\n      }} expandable={{ defaultExpandAllRows: true }} />\n    </div>);\n  }\n}\n","\nimport React from 'react'\n\nimport { iterator, assign } from \"fieldify\"\n\n\nimport { Space, Radio, Button } from \"antd\";\n\n\nexport { FieldifySchemaBuilder } from \"./Schema/Builder\"\nexport { FieldifySchemaForm } from \"./Schema/Form\"\n\nexport { FieldifySchema } from \"./Schema/Schema\"\n\nexport class FieldifySchemaRender extends React.Component {\n\n  render() {\n    return (<div>test</div>)\n  }\n}\n\n\n\n","import { input } from \"fieldify\"\n\nimport React from 'react'\nimport styles from './styles.module.css'\n\nimport * as schema from './Schema'\nimport types from './Types'\n\n// just map the input class from fieldify\nexport class Input extends input {}\n\n// export the schema\nexport const Schema = schema;\n\n// export types\nexport const Types = types;\n\n\n"],"names":["FieldifyTypeForm","props","state","cycle","verify","value","ret","componentDidUpdate","setState","schema","feedback","status","help","$help","isInjected","onChange","onError","options","$options","handler","$_type","timedChange","cb","speed","_changeTimer","_changeTimerQueue","_changeTimerCb","setTimeout","changeValue","_lastValue","end","error","message","render","children","React","Form","$doc","$required","marginBottom","sm","Component","SignderivaTypeInfo","match","path","prevProps","prevState","SignderivaTypeBuilder","pNew","pOld","changed","key","o","n","setup","prev","a","p","configure","changeIt","change","Object","assign","StringForm","Input","placeholder","target","width","TypeForm","StringInfo","Tag","color","Icon","TypeInfo","StringBuilder","minSize","maxSize","Space","InputNumber","TypeBuilder","code","types","String","description","Info","Builder","TString","NameForm","result","from","setField","Row","Col","first","last","NameInfo","NameBuilder","Name","noFormItem","EmailForm","EmailInfo","MailOutlined","EmailBuilder","subAddressing","Checkbox","checked","Email","NumberForm","NumberInfo","NumberBuilder","Number","CheckboxForm","CheckboxInfo","CheckboxBuilder","SelectForm","items","updateItems","push","Select","SelectInfo","SelectBuilder","FieldNameForm","input","user","msg","FieldNameInfo","FieldNameBuilder","FieldName","KVForm","modal","modalCurrent","dataTree","dataSource","computeDataSource","tree","ds","actions","removeKey","DeleteIcon","openModal","EditIcon","handleModalChange","data","modalError","modalInitial","editedButton","mc","type","modalErrorMessage","onCancel","columns","title","dataIndex","PlusIcon","align","layout","labelCol","span","wrapperCol","Modal","bind","Alert","Table","total","length","pageSize","hideOnSinglePage","KVInfo","KVBuilder","KV","FieldifySchema","name","resolver","Types","compile","FieldifySchemaForm","formRef","createRef","FieldifyInput","getValue","reactive","update","references","clickAddArray","line","set","_value","clickRemoveArrayItem","remove","setValue","follower","utils","orderedRead","index","item","inputPtr","$_key","lineKey","hidden","Array","isArray","source","inputPtr2","$array","min","$_array","$_nested","$type","form","ref","Button","$_schematized","child","$_ptr","$_wire","Card","$_access","allTypes","baseSchema","doc","FieldifySchemaBuilderModal","currentSchema","visible","driveSchema","Type","currentType","TypeObject","configuration","formChanged","console","log","onOk","FieldifySchemaBuilder","modalUser","schemaDataSource","updateDataSource","handlingAdd","fireOnChange","itemChanged","arg","itemRemove","removeLineup","$_path","notification","success","lineup","getLineup","modalContent","handlingEdit","self","fieldify2antDataTable","wire","current","composite","Tooltip","ObjectIcon","ptr","ArrayIcon","Popconfirm","sds","defaultExpandAllRows","FieldifySchemaRender","Schema"],"mappings":"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"}